
# ü§° Ï±ÖÏûÑ Ï£ºÎèÑ ÏÑ§Í≥ÑÎ•º Ìñ•Ìï¥
> Îç∞Ïù¥ÌÑ∞ Ï§ëÏã¨Ïùò ÏÑ§Í≥ÑÏóêÏÑú Ï±ÖÏûÑ Ï§ëÏã¨Ïùò ÏÑ§Í≥ÑÎ°ú Ï†ÑÌôòÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî Îëê Í∞ÄÏßÄ ÏõêÏπôÏùÑ Îî∞ÎùºÏïº ÌïúÎã§.

- Îç∞Ïù¥ÌÑ∞Î≥¥Îã§ ÌñâÎèôÏùÑ Î®ºÏ†Ä Í≤∞Ï†ïÌïòÎùº
- ÌòëÎ†•Ïù¥ÎùºÎäî Î¨∏Îß• ÏïàÏóêÏÑú Ï±ÖÏûÑÏùÑ Í≤∞Ï†ïÌïòÎùº

## Îç∞Ïù¥ÌÑ∞Î≥¥Îã§ ÌñâÎèôÏùÑ Î®ºÏ†Ä Í≤∞Ï†ïÌïòÎùº
- Í∞ùÏ≤¥Îäî ÌòëÎ†•Ïóê Ï∞∏Ïó¨ÌïòÍ∏∞ ÏúÑÌï¥ Ï°¥Ïû¨ÌïòÎ©∞ ÌòëÎ†• ÏïàÏóêÏÑú ÏàòÌñâÌïòÎäî Ï±ÖÏûÑÏù¥ Í≥ß Í∞ùÏ≤¥Ïùò Ï°¥Ïû¨ Í∞ÄÏπòÎ•º Ï¶ùÎ™ÖÌïúÎã§.
- Îç∞Ïù¥ÌÑ∞Ïóê Ï¥àÏ†êÏùÑ ÎßûÏ∂îÍ≤å ÎêòÎ©¥ Í∞ùÏ≤¥Ïùò Ï∫°ÏäêÌôîÍ∞Ä ÏïΩÌôîÎêòÍ∏∞ ÎïåÎ¨∏Ïóê ÎÇÆÏùÄ ÏùëÏßëÎèÑÏôÄ ÎÜíÏùÄ Í≤∞Ìï©ÎèÑÎ•º Í∞ÄÏßÑ Í∞ùÏ≤¥Îì§Î°ú ÎÑòÏ≥êÎÇòÍ≤å ÎêúÎã§.
- *Í∞ùÏ≤¥Ïùò ÌñâÎèô* Ï¶â, Ï±ÖÏûÑÏùÑ Î®ºÏ†Ä Í≤∞Ï†ïÌïú ÌõÑÏóê Í∞ùÏ≤¥Ïùò ÏÉÅÌÉúÎ•º Í≤∞Ï†ïÌïúÎã§.

## ÌòëÎ†•Ïù¥ÎùºÎäî Î¨∏Îß• ÏïàÏóêÏÑú Ï±ÖÏûÑÏùÑ Í≤∞Ï†ïÌïòÎùº
- Î©îÏÑ∏ÏßÄÎ•º Í≤∞Ï†ïÌïú ÌõÑÏóê Í∞ùÏ≤¥Î•º ÏÑ†ÌÉùÌï¥Ïïº ÌòëÎ†•Ïóê Ï†ÅÌï©Ìïú Ï±ÖÏûÑÏùÑ ÏàòÌôïÌï† Ïàò ÏûàÎã§.
- Í∞ùÏ≤¥Í∞Ä Î©îÏÑ∏ÏßÄÎ•º ÏÑ†ÌÉùÌïòÎäî Í≤ÉÏù¥ ÏïÑÎãå Î©îÏÑ∏ÏßÄÍ∞Ä Í∞ùÏ≤¥Î•º ÏÑ†ÌÉùÌïòÍ≤å Ìï¥ÏïºÌïúÎã§.
- Î©îÏÑ∏ÏßÄÍ∞Ä ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Ïùò ÏùòÎèÑÎ•º ÌëúÌòÑÌïúÎã§.


## Ï±ÖÏûÑ Ï£ºÎèÑ ÏÑ§Í≥Ñ
- ÏãúÏä§ÌÖúÏù¥ ÏÇ¨Ïö©ÏûêÏóêÍ≤å Ï†úÍ≥µÌï¥Ïïº ÌïòÎäî Í∏∞Îä•Ïù∏ ÏãúÏä§ÌÖú Ï±ÖÏûÑÏùÑ ÌååÏïÖÌïúÎã§.
- ÏãúÏä§ÌÖú Ï±ÖÏûÑÏùÑ Îçî ÏûëÏùÄ Ï±ÖÏûÑÏúºÎ°ú Î∂ÑÌï†ÌïúÎã§.
- Î∂ÑÌï†Îêú Ï±ÖÏûÑÏùÑ ÏàòÌñâÌï† Ïàò ÏûàÎäî Ï†ÅÏ†àÌïú Í∞ùÏ≤¥ ÎòêÎäî Ïó≠Ìï†ÏùÑ Ï∞æÏïÑ Ï±ÖÏûÑÏùÑ Ìï†ÎãπÌïúÎã§.
- Í∞ùÏ≤¥Í∞Ä Ï±ÖÏûÑÏùÑ ÏàòÌñâÌïòÎäî ÎèÑÏ§ë Îã§Î•∏ Í∞ùÏ≤¥Ïùò ÎèÑÏõÄÏù¥ ÌïÑÏöîÌïú Í≤ΩÏö∞ Ïù¥Î•º Ï±ÖÏûÑÏßà Ï†ÅÏ†àÌïú Í∞ùÏ≤¥ ÎòêÎäî Ïó≠Ìï†ÏùÑ Í∞ñÎäîÎã§.
- Ìï¥Îãπ Í∞ùÏ≤¥ ÎòêÎäî Ïó≠Ìï†ÏóêÍ≤å Ï±ÖÏûÑÏùÑ Ìï†ÎãπÌï®ÏúºÎ°úÏç® Îëê Í∞ùÏ≤¥Í∞Ä ÌòëÎ†•ÌïòÍ≤å ÌïúÎã§.


# üê≠ Ï±ÖÏûÑ Ìï†ÎãπÏùÑ ÏúÑÌïú GRASP Ìå®ÌÑ¥
> *GRASP Ìå®ÌÑ¥* : Í∞ùÏ≤¥ÏóêÍ≤å Ï±ÖÏûÑÏùÑ Ìï†ÎãπÌï† Îïå ÏßÄÏπ®ÏúºÎ°ú ÏÇºÏùÑ Ïàò ÏûàÎäî ÏõêÏπôÎì§Ïùò ÏßëÌï©

## ÎèÑÎ©îÏù∏ Í∞úÎÖêÏóêÏÑú Ï∂úÎ∞úÌïòÍ∏∞
- ÎèÑÎ©îÏù∏ Í∞úÎÖêÎì§ÏùÑ Ï±ÖÏûÑ Ìï†ÎãπÏùò ÎåÄÏÉÅÏúºÎ°ú ÏÇ¨Ïö©ÌïòÎ©¥ ÏΩîÎìúÏóê ÎèÑÎ©îÏù∏Ïùò Î™®ÏäµÏùÑ Ìà¨ÏòÅÌïòÍ∏∞Í∞Ä Ï¢Ä Îçî ÏàòÏõîÌï¥ÏßÑÎã§.
- Îã®, ÎèÑÎ©îÏù∏Ïùò Í∞úÎÖêÏùÑ Ï†ïÎ¶¨ÌïòÎäî Îç∞Ïóê ÎÑàÎ¨¥ ÎßéÏùÄ ÏãúÍ∞ÑÏùÑ Îì§Ïù¥ÏßÄ ÎßêÍ≥† Îπ†Î•¥Í≤å ÏÑ§Í≥ÑÏôÄ Íµ¨ÌòÑÏùÑ ÏßÑÌñâÌïòÎùº.

## Ï†ïÎ≥¥ Ï†ÑÎ¨∏Í∞ÄÏóêÍ≤å Ï±ÖÏûÑÏùÑ Ìï†ÎãπÌïòÎùº
> Ï†ïÎ≥¥ Ï†ÑÎ¨∏Í∞Ä Ìå®ÌÑ¥(INFORMATION EXPERT) Ìå®ÌÑ¥ : Ï±ÖÏûÑÏùÑ ÏàòÌñâÌï† Ï†ïÎ≥¥Î•º ÏïåÍ≥† ÏûàÎäî Í∞ùÏ≤¥ÏóêÍ≤å Ï±ÖÏûÑÏùÑ Ìï†ÎãπÌïòÎäî Í≤É.

1. Î©îÏÑ∏ÏßÄÎ•º Ï†ÑÏÜ°Ìï† Í∞ùÏ≤¥Îäî Î¨¥ÏóáÏùÑ ÏõêÌïòÎäîÍ∞Ä?
2. Î©îÏÑ∏ÏßÄÎ•º ÏàòÏã†Ìï† Ï†ÅÌï©Ìïú Í∞ùÏ≤¥Îäî ÎàÑÍµ¨Ïù∏Í∞Ä?

## ÎÜíÏùÄ ÏùëÏßëÎèÑÏôÄ ÎÇÆÏùÄ Í≤∞Ìï©ÎèÑ
> GRASPÏóêÏÑú LOW COUPLING(ÎÇÆÏùÄ Í≤∞Ìï©ÎèÑ) Ìå®ÌÑ¥Í≥º HIGH COHESION(ÎÜíÏùÄ ÏùëÏßëÎèÑ) Ìå®ÌÑ¥

- LOW COUPLING(ÎÇÆÏùÄ Í≤∞Ìï©ÎèÑ) Ìå®ÌÑ¥
	- Ïñ¥ÎñªÍ≤å ÌïòÎ©¥ ÏùòÏ°¥ÏÑ±ÏùÑ ÎÇÆÏ∂îÍ≥† Î≥ÄÌôîÏùò ÏòÅÌñ•ÏùÑ Ï§ÑÏù¥Î©∞ Ïû¨ÏÇ¨Ïö©ÏÑ±ÏùÑ Ï¶ùÍ∞ÄÏãúÌÇ¨ Ïàò ÏûàÏùÑÍπå?
	- ÏÑ§Í≥ÑÏùò Ï†ÑÏ≤¥Ï†ÅÏù∏ Í≤∞Ìï©ÎèÑÍ∞Ä ÎÇÆÍ≤å Ïú†ÏßÄÎêòÎèÑÎ°ù Ï±ÖÏûÑÏùÑ Ìï†ÎãπÌïòÎùº.
- HIGH COHESION(ÎÜíÏùÄ ÏùëÏßëÎèÑ) Ìå®ÌÑ¥
	- Ïñ¥ÎñªÍ≤å Î≥µÏû°ÏÑ±ÏùÑ Í¥ÄÎ¶¨Ìï† Ïàò ÏûàÎäî ÏàòÏ§ÄÏúºÎ°ú Ïú†ÏßÄÌï† Í≤ÉÏù∏Í∞Ä?
	- ÎÜíÏùÄ ÏùëÏßëÎèÑÎ•º Ïú†ÏßÄÌï† Ïàò ÏûàÍ≤å Ï±ÖÏûÑÏùÑ Ìï†ÎãπÌïòÎùº.

## Ï∞ΩÏ°∞ÏûêÏóêÍ≤å Í∞ùÏ≤¥ ÏÉùÏÑ± Ï±ÖÏûÑÏùÑ Ìï†ÎãπÌïòÎùº
- CREATOR Ìå®ÌÑ¥(Ï∞ΩÏ°∞Ïûê Ìå®ÌÑ¥) : Í∞ùÏ≤¥ AÎ•º ÏÉùÏÑ±Ìï¥Ïïº Ìï† Îïå Ïñ¥Îñ§ Í∞ùÏ≤¥ÏóêÍ≤å Í∞ùÏ≤¥ ÏÉùÏÑ± Ìå®ÌÑ¥ÏùÑ Ìï†ÎãπÌï¥Ïïº ÌïòÎäîÍ∞Ä? 

> ÏïÑÎûò Ï°∞Í±¥ÏùÑ ÏµúÎåÄÌïú ÎßéÏù¥ ÎßåÏ°±ÌïòÎäî BÏóêÍ≤å Í∞ùÏ≤¥ ÏÉùÏÑ± Ï±ÖÏûÑÏùÑ Ìï†ÎãπÌïòÎùº.

- BÍ∞Ä A Í∞ùÏ≤¥Î•º Ìè¨Ìï®ÌïòÍ±∞ÎÇò Ï∞∏Ï°∞ÌïúÎã§.
- BÍ∞Ä A Í∞ùÏ≤¥Î•º Í∏∞Î°ùÌïúÎã§.
- BÍ∞Ä A Í∞ùÏ≤¥Î•º Í∏¥Î∞ÄÌïòÍ≤å ÏÇ¨Ïö©ÌïúÎã§.
- BÍ∞Ä A Í∞ùÏ≤¥Î•º Ï¥àÍ∏∞ÌôîÌïòÎäî Îç∞ ÌïÑÏöîÌïú Îç∞Ïù¥ÌÑ∞Î•º Í∞ÄÏßÄÍ≥† ÏûàÎã§.(Ïù¥ Í≤ΩÏö∞ BÎäî AÏóê ÎåÄÌïú Ï†ïÎ≥¥ Ï†ÑÎ¨∏Í∞ÄÎã§.)


# üê£ Íµ¨ÌòÑÏùÑ ÌÜµÌïú Í≤ÄÏ¶ù

```typescript title="ÏòàÏ†úÏΩîÎìú1"
class Customer {
  constructor(
    private _id: string,
    private _name: string,
    private _age: number
  ) {}
}

class Money {
  static readonly ZERO = Money.wons(0);

  constructor(private amount: number) {}

  static wons(amount: number) {
    return new Money(amount);
  }

  getAmount(): number {
    return this.amount;
  }

  plus = (amount: number): Money => {
    return new Money(this.amount + amount);
  };

  minus = (amount: number): Money => {
    return new Money(this.amount - amount);
  };

  times = (percent: number): Money => {
    return new Money(this.amount * percent);
  };

  isLessThan = (other: Money): boolean => {
    return this.amount < other.getAmount();
  };

  isGreaterThanOrEqual = (other: Money): boolean => {
    return this.amount >= other.getAmount();
  };
}

class Screening {
  constructor(
    private movie: Movie,
    private sequence: number,
    private whenScreened: Date
  ) {}

  getWhenScreened = (): Date => {
    return this.whenScreened;
  };

  getSequence = (): number => {
    return this.sequence;
  };

  private calculateFee = (audienceCount: number): Money => {
    return this.movie.calculateMovieFee(this).times(audienceCount);
  };

  reserve = (customer: Customer, audienceCount: number): Reservation => {
    return new Reservation(
      customer,
      this,
      this.calculateFee(audienceCount),
      audienceCount
    );
  };
}

enum MovieType {
  AMOUNT_DISCOUNT = "AMOUNT_DISCOUNT",
  PERCENT_DISCOUNT = "PERCENT_DISCOUNT",
  NONE_DISCOUNT = "NONE_DISCOUNT",
}

class Movie {
  constructor(
    private title: string,
    private runningTime: number,
    private fee: Money,
    private discountConditions: Array<DiscountCondition>,
    //
    private movieType: MovieType,
    private discountAmount: Money,
    private discountPercent: number
  ) {}

  calculateMovieFee = (screening: Screening): Money => {
    if (this.isDiscountable(screening)) {
      return this.fee.minus(this.calculateDiscountAmount().getAmount());
    }

    return this.fee;
  };

  private isDiscountable = (screening: Screening): boolean => {
    return this.discountConditions.some((condition) =>
      condition.isSatisfiedBy(screening)
    );
  };

  private calculateDiscountAmount = (): Money | never => {
    switch (this.movieType) {
      case "AMOUNT_DISCOUNT":
        return this.calculateAmountDiscountAmount();
      case "PERCENT_DISCOUNT":
        return this.calculatePercentDiscountAmount();
      case "NONE_DISCOUNT":
        return this.calculateNoneDiscountAmount();
    }

    throw new Error("ERROR");
  };

  private calculateAmountDiscountAmount = (): Money => {
    return this.discountAmount;
  };

  private calculatePercentDiscountAmount = (): Money => {
    return this.fee.times(this.discountPercent);
  };

  private calculateNoneDiscountAmount = (): Money => {
    return Money.ZERO;
  };
}

enum DiscountConditionType {
  SEQUENCE = "SEQUENCE",
  PERIOD = "PERIOD",
}

class DiscountCondition {
  constructor(
    private type: DiscountConditionType,
    private sequence: number,
    private dayOfWeek: number,
    private startTime: number,
    private endTime: number
  ) {}

  isSatisfiedBy = (screening: Screening): boolean => {
    if (this.type === DiscountConditionType.PERIOD) {
      return this.isSatisfiedByPeriod(screening);
    }

    return this.isSatisfiedBySequence(screening);
  };

  private isSatisfiedByPeriod = (screening: Screening): boolean => {
    return (
      this.dayOfWeek === screening.getWhenScreened().getDay() &&
      this.startTime <= screening.getWhenScreened().getTime() &&
      this.endTime >= screening.getWhenScreened().getTime()
    );
  };

  private isSatisfiedBySequence = (screening: Screening): boolean => {
    return this.sequence === screening.getSequence();
  };
}

class Reservation {
  constructor(
    private customer: Customer,
    private screening: Screening,
    private fee: Money,
    private audienceCount: number
  ) {}
}
```

## DiscountCondition Í∞úÏÑ†ÌïòÍ∏∞
```typescript title="DiscountCondition"
class DiscountCondition {
  constructor(
    private type: DiscountConditionType,
    private sequence: number,
    private dayOfWeek: number,
    private startTime: number,
    private endTime: number
  ) {}

  isSatisfiedBy = (screening: Screening): boolean => {
    if (this.type === DiscountConditionType.PERIOD) {
      return this.isSatisfiedByPeriod(screening);
    }

    return this.isSatisfiedBySequence(screening);
  };

  private isSatisfiedByPeriod = (screening: Screening): boolean => {
    return (
      this.dayOfWeek === screening.getWhenScreened().getDay() &&
      this.startTime <= screening.getWhenScreened().getTime() &&
      this.endTime >= screening.getWhenScreened().getTime()
    );
  };

  private isSatisfiedBySequence = (screening: Screening): boolean => {
    return this.sequence === screening.getSequence();
  };
}
```

> DiscountConditionÏù¥ Î≥ÄÍ≤ΩÏóê Ï∑®ÏïΩÌïú ÌÅ¥ÎûòÏä§Ïù∏ Ïù¥Ïú†

- ÏÉàÎ°úÏö¥ Ìï†Ïù∏ Ï°∞Í±¥ Ï∂îÍ∞Ä
- ÏàúÎ≤à Ï°∞Í±¥ÏùÑ ÌåêÎã®ÌïòÎäî Î°úÏßÅ Î≥ÄÍ≤Ω
- Í∏∞Í∞Ñ Ï°∞Í±¥ÏùÑ ÌåêÎã®ÌïòÎäî Î°úÏßÅÏù¥ Î≥ÄÍ≤ΩÎêòÎäî Í≤ΩÏö∞
### ÌÅ¥ÎûòÏä§ ÏùëÏßëÎèÑ ÌåêÎã®ÌïòÍ∏∞
> ÏùëÏßëÎèÑÍ∞Ä ÎÇÆÎã§Îäî Í≤ÉÏùÄ ÏÑúÎ°ú Ïó∞Í¥ÄÏÑ±Ïù¥ ÏóÜÎäî Í∏∞Îä•Ïù¥ÎÇò Îç∞Ïù¥ÌÑ∞Í∞Ä ÌïòÎÇòÏùòÌÅ¥ÎûòÏä§ ÏïàÏóê Î≠âÏ≥êÏ†∏ ÏûàÎã§Îäî Í≤ÉÏùÑ ÏùòÎØ∏ÌïúÎã§.

1. ÌÅ¥ÎûòÏä§Í∞ÄÌïòÎÇò Ïù¥ÏÉÅÏùò Ïù¥Ïú†Î°ú Î≥ÄÍ≤Ω ÎèºÏïº ÌïúÎã§Î©¥ ÏùëÏßëÎèÑÍ∞Ä ÎÇÆÏùÄ Í≤ÉÏù¥Îã§. 
2. Ïù∏Ïä§ÌÑ¥Ïä§ Î≥ÄÏàòÍ∞Ä Ï¥àÍ∏∞Ìôî ÎêòÎäî ÏãúÏ†ê
	- ÏùëÏßëÎèÑÍ∞Ä ÎÜíÏùÄ ÌÅ¥ÎûòÏä§Îäî Ïù∏Ïä§ÌÑ¥Ïä§Î•º ÏÉùÏÑ±Ìï† Îïå Î™®Îì† ÏÜçÏÑ±ÏùÑ Ìï®Íªò Ï¥àÍ∏∞ÌôîÌïúÎã§.
	- ÏùëÏßëÎèÑÍ∞Ä ÎÇÆÏùÄ ÌÅ¥ÎûòÏä§Îäî Í∞ùÏ≤¥Ïùò ÏÜçÏÑ± Ï§ë ÏùºÎ∂ÄÎßå Ï¥àÍ∏∞Ìôî ÌïòÍ≥† ÏùºÎ∂ÄÎäî Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏùÄ ÏÉÅÌÉúÎ°ú ÎÇ®Í≤®ÏßÑÎã§.
3. Î©îÏÑúÎìúÎì§Ïù¥ Ïù∏Ïä§ÌÑ¥Ïä§ Î≥ÄÏàòÎ•º ÏÇ¨Ïö©ÌïòÎäî Î∞©Ïãù
	- Î™®Îì† Î©îÏÑúÎìúÍ∞Ä Í∞ùÏ≤¥Ïùò Î™®Îì† ÏÜçÏÑ±ÏùÑ ÏÇ¨Ïö©ÌïúÎã§Î©¥ ÌÅ¥ÎûòÏä§Ïùò ÏùëÏßëÎèÑÎäî ÎÜíÎã§.
	- Î©îÏÑúÎìúÎì§Ïù¥ ÏÇ¨Ïö©ÌïòÎäî ÏÜçÏÑ±Ïóê Îî∞Îùº Í∑∏Î£πÏù¥ ÎÇòÎâúÎã§Î©¥ ÏùëÏßëÎèÑÍ∞Ä ÎÇÆÎã§.

#### ÏùëÏßëÎèÑÍ∞Ä ÎÜíÏùÄ ÌÅ¥ÎûòÏä§Î•º ÎßåÎìúÎ†§Î©¥
- *Î≥ÄÍ≤ΩÏùò Ïù¥Ïú†Î•º Í∏∞Ï§ÄÏúºÎ°ú ÌÅ¥ÎûòÏä§Î•º Î∂ÑÎ¶¨ÌïòÎùº* 
- *Ìï®Íªò Ï¥àÍ∏∞ÌôîÎêòÎäî ÏÜçÏÑ±ÏùÑ Í∏∞Ï§ÄÏúºÎ°ú ÏΩîÎìúÎ•º Î∂ÑÎ¶¨Ìï¥Ïïº ÌïúÎã§.* 
- *ÏÜçÏÑ± Í∑∏Î£πÍ≥º Ìï¥Îãπ Í∑∏Î£πÏóê Ï†ëÍ∑ºÌïòÎäî Î©îÏÑúÎìú Í∑∏Î£πÏùÑ Í∏∞Ï§ÄÏúºÎ°ú ÏΩîÎìúÎ•º Î∂ÑÎ¶¨Ìï¥Ïïº ÌïúÎã§.* 




## ÌÉÄÏûÖ Î∂ÑÎ¶¨ÌïòÍ∏∞
```typescript title="ÏòàÏ†úÏΩîÎìú2"
class Customer {
  constructor(
    private _id: string,
    private _name: string,
    private _age: number
  ) {}
}

class Money {
  static readonly ZERO = Money.wons(0);

  constructor(private amount: number) {}

  static wons(amount: number) {
    return new Money(amount);
  }

  getAmount(): number {
    return this.amount;
  }

  plus = (amount: number): Money => {
    return new Money(this.amount + amount);
  };

  minus = (amount: number): Money => {
    return new Money(this.amount - amount);
  };

  times = (percent: number): Money => {
    return new Money(this.amount * percent);
  };

  isLessThan = (other: Money): boolean => {
    return this.amount < other.getAmount();
  };

  isGreaterThanOrEqual = (other: Money): boolean => {
    return this.amount >= other.getAmount();
  };
}

class Screening {
  constructor(
    private movie: Movie,
    private sequence: number,
    private whenScreened: Date
  ) {}

  getWhenScreened = () => {
    return this.whenScreened;
  };

  getSequence = () => {
    return this.sequence;
  };

  private calculateFee = (audienceCount: number): Money => {
    return this.movie.calculateMovieFee(this).times(audienceCount);
  };

  reserve = (customer: Customer, audienceCount: number): Reservation => {
    return new Reservation(
      customer,
      this,
      this.calculateFee(audienceCount),
      audienceCount
    );
  };
}

enum MovieType {
  AMOUNT_DISCOUNT = "AMOUNT_DISCOUNT",
  PERCENT_DISCOUNT = "PERCENT_DISCOUNT",
  NONE_DISCOUNT = "NONE_DISCOUNT",
}

class Movie {
  constructor(
    private title: string,
    private runningTime: number,
    private fee: Money,
    private discountConditions: Array<DiscountCondition>,

    private movieType: MovieType,
    private discountAmount: Money,
    private discountPercent: number
  ) {}

  calculateMovieFee = (screening: Screening): Money => {
    if (this.isDiscountable(screening)) {
      return this.fee.minus(this.calculateDiscountAmount().getAmount());
    }

    return this.fee;
  };

  private isDiscountable = (screening: Screening): boolean => {
    return this.discountConditions.some((condition) =>
      condition.isSatisfiedBy(screening)
    );
  };

  private calculateDiscountAmount = (): Money | never => {
    switch (this.movieType) {
      case "AMOUNT_DISCOUNT":
        return this.calculateAmountDiscountAmount();
      case "PERCENT_DISCOUNT":
        return this.calculatePercentDiscountAmount();
      case "NONE_DISCOUNT":
        return this.calculateNoneDiscountAmount();
    }

    throw new Error("ERROR");
  };

  private calculateAmountDiscountAmount = (): Money => {
    return this.discountAmount;
  };

  private calculatePercentDiscountAmount = (): Money => {
    return this.fee.times(this.discountPercent);
  };

  private calculateNoneDiscountAmount = (): Money => {
    return Money.ZERO;
  };
}

enum DiscountConditionType {
  SEQUENCE = "SEQUENCE",
  PERIOD = "PERIOD",
}

interface DiscountCondition {
  isSatisfiedBy: (screening: Screening) => boolean;
}

class PeriodCondition implements DiscountCondition {
  constructor(
    private dayOfWeek: number,
    private startTime: number,
    private endTime: number
  ) {}

  isSatisfiedBy = (screening: Screening): boolean => {
    return (
      this.dayOfWeek === screening.getWhenScreened().getDay() &&
      this.startTime <= screening.getWhenScreened().getTime() &&
      this.endTime >= screening.getWhenScreened().getTime()
    );
  };
}

class SequenceCondtion implements DiscountCondition {
  constructor(private sequence: number) {}

  isSatisfiedBy = (screening: Screening): boolean => {
    return this.sequence === screening.getSequence();
  };
}

class Reservation {
  constructor(
    private customer: Customer,
    private screening: Screening,
    private fee: Money,
    private audienceCount: number
  ) {}
}
```


> SequenceConditionÍ≥º PeriodConditionÏù¥ÎùºÎäî ÎëêÍ∞úÏùò ÌÅ¥ÎûòÏä§Î°ú Î∂ÑÎ¶¨

```typescript
class PeriodCondition {
  constructor(
    private dayOfWeek: number,
    private startTime: number,
    private endTime: number
  ) {}

  isSatisfiedBy = (screening: Screening): boolean => {
    return (
      this.dayOfWeek === screening.getWhenScreened().getDay() &&
      this.startTime <= screening.getWhenScreened().getTime() &&
      this.endTime >= screening.getWhenScreened().getTime()
    );
  };
}

class SequenceCondtion {
  constructor(private sequence: number) {}

  isSatisfiedBy = (screening: Screening): boolean => {
    return this.sequence === screening.getSequence();
  };
}
```

> ÌÅ¥ÎûòÏä§Î•º Î∂ÑÎ¶¨Ìïú ÌõÑ ÏÉàÎ°úÏö¥ Î¨∏Ï†úÍ∞Ä Î∞úÏÉùÌñàÎã§.
> Movie Ïù∏Ïä§ÌÑ¥Ïä§Îäî Ïù¥Ï†úÎäî PeriodConditionÌÅ¥ÎûòÏä§ÏôÄ SequenceCondtion ÌÅ¥ÎûòÏä§Ïùò Ïù∏Ïä§ÌÑ¥Ïä§ÏôÄ ÌòëÎ†•Ìï† Ïàò ÏûàÏñ¥ÏïºÌïúÎã§.

## Îã§ÌòïÏÑ±ÏùÑ ÌÜµÌï¥ Î∂ÑÎ¶¨ÌïòÍ∏∞
> MovieÎäî Ìï†Ïù∏ Í∞ÄÎä• Ïó¨Î∂ÄÎ•º Î∞òÌôò Ìï¥Ï£ºÍ∏∞Îßå ÌïòÎ©¥ ÎêòÍ∏∞ ÎïåÎ¨∏Ïóê Ïù¥Îïå *Ïó≠Ìï†* Ïùò Í∞úÎÖêÏù¥ ÏÇ¨Ïö© ÎêúÎã§.
> Ï∂îÏÉÅ ÌÅ¥ÎûòÏä§ÎÇò Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º ÏÇ¨Ïö©ÌïúÎã§.

```typescript
interface DiscountCondition {
    isSatisfiedBy: (screening: Screening) => boolean;
  }

  class PeriodCondition implements DiscountCondition {
    constructor(
      private dayOfWeek: number,
      private startTime: number,
      private endTime: number
    ) {}

    isSatisfiedBy = (screening: Screening): boolean => {
      return (
        this.dayOfWeek === screening.getWhenScreened().getDay() &&
        this.startTime <= screening.getWhenScreened().getTime() &&
        this.endTime >= screening.getWhenScreened().getTime()
      );
    };
  }

  class SequenceCondtion implements DiscountCondition {
    constructor(private sequence: number) {}

    isSatisfiedBy = (screening: Screening): boolean => {
      return this.sequence === screening.getSequence();
    };
  }

class Movie {

	private discountConditions: Array<DiscountCondition>,
	constructor() {}
	
	calculateMovieFee = (screening: Screening): Money => {
	if (this.isDiscountable(screening)) {
		return this.fee.minus(this.calculateDiscountAmount().getAmount());
	}
	
		return this.fee;
	};

  private isDiscountable = (screening: Screening): boolean => {
	return this.discountConditions.some((condition) =>
	  condition.isSatisfiedBy(screening)
	);
  };
}
```

- GRASPÏóêÏÑú POLYMORPHISM(Îã§ÌòïÏÑ±) Ìå®ÌÑ¥ : Í∞ùÏ≤¥Ïùò ÌÉÄÏûÖÏóê Îî∞Îùº Î≥ÄÌïòÎäî ÌñâÎèôÏù¥ ÏûàÎã§Î©¥ ÌÉÄÏûÖÏùÑ Î∂ÑÎ¶¨ÌïòÍ≥† Î≥ÄÌôîÌïòÎäî ÌñâÎèôÏùÑ Í∞Å ÌÉÄÏûÖÏùò Ï±ÖÏûÑÏúºÎ°ú Ìï†ÎãπÌïòÎùºÎäîÍ≤É.

> POLYMORPHISM(Îã§ÌòïÏÑ±)Ìå®ÌÑ¥
> Í∞ùÏ≤¥Ïùò ÌÉÄÏûÖÏóê Îî∞Îùº Î≥ÄÌïòÎäî Î°úÏßÅÏù¥ ÏûàÏùÑ Îïå Î≥ÄÌïòÎäî Î°úÏßÅÏùÑ Îã¥ÎãπÌï† Ï±ÖÏûÑÏùÑ Ïñ¥ÎñªÍ≤å Ìï†ÎãπÌï¥Ïïº ÌïòÎäîÍ∞Ä? 
> ÌÉÄÏûÖÏùÑ Î™ÖÏãúÏ†ÅÏúºÎ°ú Ï†ïÏùòÌïòÍ≥† Í∞Å ÌÉÄÏûÖÏóê Îã§ÌòïÏ†ÅÏúºÎ°ú ÌñâÎèôÌïòÎäî Ï±ÖÏûÑÏùÑ Ìï†ÎãπÌïòÎùº.
> ÌîÑÎ°úÍ∑∏Îû®ÏùÑ if ~ else ÎòêÎäî switch ~ case Îì±Ïùò Ï°∞Í±¥ ÎÖºÎ¶¨Î•º ÏÇ¨Ïö©Ìï¥ÏÑú ÏÑ§Í≥Ñ ÌïúÎã§Î©¥ ÏÉàÎ°úÏö¥ Î≥ÄÌôîÍ∞Ä ÏùºÏñ¥ÎÇú Í≤ΩÏö∞
> Ï°∞Í±¥ ÎÖºÎ¶¨Î•º ÏàòÏ†ïÌï¥Ïïº ÌïúÎã§. 
> POLYMORPHISM Ìå®ÌÑ¥ÏùÄ Í∞ùÏ≤¥Ïùò ÌÉÄÏûÖÏùÑ Í≤ÄÏÇ¨Ìï¥ÏÑú ÌÉÄÏûÖÏóê Îî∞Îùº Ïó¨Îü¨ ÎåÄÏïàÎì§ÏùÑ ÏàòÌñâÌïòÎäî Ï°∞Í±¥Ï†ÅÏù∏ ÎÖºÎ¶¨Î•º ÏÇ¨Ïö©ÌïòÏßÄ ÎßêÎùºÍ≥† Í≤ΩÍ≥†ÌïúÎã§. 
> **Îã§ÌòïÏÑ±ÏùÑ Ïù¥Ïö©Ìï¥ ÏÉàÎ°úÏö¥ Î≥ÄÌôîÎ•º Îã§Î£®Í∏∞ÏâΩÍ≤å ÌôïÏû•ÌïòÎùºÍ≥† Í∂åÍ≥†ÌïúÎã§.** 

## Î≥ÄÍ≤ΩÏúºÎ°úÎ∂ÄÌÑ∞ Î≥¥Ìò∏ÌïòÍ∏∞
### PROTECTED VARIATIONS(Î≥ÄÍ≤Ω Î≥¥Ìò∏) Ìå®ÌÑ¥
- Í∞ùÏ≤¥, ÏÑúÎ∏åÏãúÏä§ÌÖú, ÏãúÏä§ÌÖúÏùÑ Ïñ¥ÎñªÍ≤å ÏÑ§Í≥ÑÌï¥Ïïº Î≥ÄÌôîÏôÄ Î∂àÏïàÏ†ïÏÑ±Ïù¥ Îã§Î•∏ ÏöîÏÜåÏóê ÎÇòÏÅú ÏòÅÌñ•ÏùÑ ÎØ∏ÏπòÏßÄ ÏïäÎèÑÎ°ù Î∞©ÏßÄÌï† Ïàò ÏûàÏùÑÍπå?
- Î≥ÄÌôîÍ∞Ä ÏòàÏÉÅÎêòÎäî Î∂àÏïàÏ†ïÌïú ÏßÄÏ†êÎì§ÏùÑ ÏãùÎ≥ÑÌïòÍ≥† Í∑∏ Ï£ºÏúÑÏóê ÏïàÏ†ïÎêú Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º ÌòïÏÑ±ÌïòÎèÑÎ°ù Ï±ÖÏûÑÏùÑ Ìï†ÎãπÌïòÎùº.
- *ÏÑ§Í≥ÑÏóêÏÑú Î≥ÄÌïòÎäî Í≤ÉÏù¥ Î¨¥ÏóáÏù∏ÏßÄ Í≥†Î†§ÌïòÍ≥† Î≥ÄÌïòÎäî Í∞úÎÖêÏùÑ Ï∫°ÏäêÌôîÌïòÎùº* 



## Movie ÌÅ¥ÎûòÏä§ Í∞úÏÑ†ÌïòÍ∏∞
```typescript title="ÏòàÏ†úÏΩîÎìú3"
class Customer {
  constructor(
    private _id: string,
    private _name: string,
    private _age: number
  ) {}
}

class Money {
  static readonly ZERO = Money.wons(0);

  constructor(private amount: number) {}

  static wons(amount: number) {
    return new Money(amount);
  }

  getAmount(): number {
    return this.amount;
  }

  plus = (amount: number): Money => {
    return new Money(this.amount + amount);
  };

  minus = (amount: number): Money => {
    return new Money(this.amount - amount);
  };

  times = (percent: number): Money => {
    return new Money(this.amount * percent);
  };

  isLessThan = (other: Money): boolean => {
    return this.amount < other.getAmount();
  };

  isGreaterThanOrEqual = (other: Money): boolean => {
    return this.amount >= other.getAmount();
  };
}

class Screening {
  constructor(
    private movie: Movie,
    private sequence: number,
    private whenScreened: Date
  ) {}

  getWhenScreened = () => {
    return this.whenScreened;
  };

  getSequence = () => {
    return this.sequence;
  };

  private calculateFee = (audienceCount: number): Money => {
    return this.movie.calculateMovieFee(this).times(audienceCount);
  };
}

enum MovieType {
  AMOUNT_DISCOUNT = "AMOUNT_DISCOUNT",
  PERCENT_DISCOUNT = "PERCENT_DISCOUNT",
  NONE_DISCOUNT = "NONE_DISCOUNT",
}

abstract class Movie {
  constructor(
    private title: string,
    private runningTime: number,
    private fee: Money,
    private discountConditions: Array<DiscountCondition>
  ) {}

  protected getFee(): Money {
    return this.fee;
  }

  public calculateMovieFee(screening: Screening): Money {
    if (this.isDiscountable(screening)) {
      return this.fee.minus(this.calculateDiscountAmount().getAmount());
    }

    return this.fee;
  }

  private isDiscountable(screening: Screening): boolean {
    return this.discountConditions.some((condition) =>
      condition.isSatisfiedBy(screening)
    );
  }

  protected abstract calculateDiscountAmount(): Money;
}

class AmountDiscountMoive extends Movie {
  private discountAmount: Money;

  constructor(
    title: string,
    runningTime: number,
    fee: Money,
    discountConditions: Array<DiscountCondition>,
    discountAmount: Money
  ) {
    super(title, runningTime, fee, discountConditions);
    this.discountAmount = discountAmount;
  }

  protected override calculateDiscountAmount(): Money {
    return this.discountAmount;
  }
}

class PercentDiscountMovie extends Movie {

  private percent: number;

  constructor(
    title: string,
    runningTime: number,
    fee: Money,
    discountConditions: Array<DiscountCondition>,
    percent: number
  ) {
    super(title, runningTime, fee, discountConditions);
    this.percent = percent;
  }

  protected override calculateDiscountAmount(): Money {
    return this.getFee().times(this.percent);
  }
  
}

class NoneDiscountMovie extends Movie {
  constructor(
    title: string,
    runningTime: number,
    fee: Money,
    discountConditions: Array<DiscountCondition>
  ) {
    super(title, runningTime, fee, discountConditions);
  }

  protected override calculateDiscountAmount(): Money {
    return Money.ZERO;
  }
}

enum DiscountConditionType {
  SEQUENCE = "SEQUENCE",
  PERIOD = "PERIOD",
}

interface DiscountCondition {
  isSatisfiedBy: (screening: Screening) => boolean;
}

class PeriodCondition implements DiscountCondition {
  constructor(
    private dayOfWeek: number,
    private startTime: number,
    private endTime: number
  ) {}

  isSatisfiedBy = (screening: Screening): boolean => {
    return (
      this.dayOfWeek === screening.getWhenScreened().getDay() &&
      this.startTime <= screening.getWhenScreened().getTime() &&
      this.endTime >= screening.getWhenScreened().getTime()
    );
  };
}

class SequenceCondtion implements DiscountCondition {
  constructor(private sequence: number) {}

  isSatisfiedBy = (screening: Screening): boolean => {
    return this.sequence === screening.getSequence();
  };
}

class Reservation {
  constructor() {}
}
```

***

```typescript
abstract class Movie {
  constructor(
    private title: string,
    private runningTime: number,
    private fee: Money,
    private discountConditions: Array<DiscountCondition>
  ) {}

  protected getFee(): Money {
    return this.fee;
  }

  public calculateMovieFee(screening: Screening): Money {
    if (this.isDiscountable(screening)) {
      return this.fee.minus(this.calculateDiscountAmount().getAmount());
    }

    return this.fee;
  }

  private isDiscountable(screening: Screening): boolean {
    return this.discountConditions.some((condition) =>
      condition.isSatisfiedBy(screening)
    );
  }

  protected abstract calculateDiscountAmount(): Money;
}

class AmountDiscountMoive extends Movie {
  private discountAmount: Money;

  constructor(
    title: string,
    runningTime: number,
    fee: Money,
    discountConditions: Array<DiscountCondition>,
    discountAmount: Money
  ) {
    super(title, runningTime, fee, discountConditions);
    this.discountAmount = discountAmount;
  }

  protected override calculateDiscountAmount(): Money {
    return this.discountAmount;
  }
}

class PercentDiscountMovie extends Movie {

  private percent: number;

  constructor(
    title: string,
    runningTime: number,
    fee: Money,
    discountConditions: Array<DiscountCondition>,
    percent: number
  ) {
    super(title, runningTime, fee, discountConditions);
    this.percent = percent;
  }

  protected override calculateDiscountAmount(): Money {
    return this.getFee().times(this.percent);
  }
  
}

class NoneDiscountMovie extends Movie {
  constructor(
    title: string,
    runningTime: number,
    fee: Money,
    discountConditions: Array<DiscountCondition>
  ) {
    super(title, runningTime, fee, discountConditions);
  }

  protected override calculateDiscountAmount(): Money {
    return Money.ZERO;
  }
}
```

## Î≥ÄÍ≤ΩÍ≥º Ïú†Ïó∞ÏÑ±
> Í∞úÎ∞úÏûêÎ°úÏÑú Î≥ÄÍ≤ΩÏóê ÎåÄÎπÑÌï† Ïàò ÏûàÎäîÍ≤É

1. ÏΩîÎìúÎ•º Ïù¥Ìï¥ÌïòÍ≥† 

