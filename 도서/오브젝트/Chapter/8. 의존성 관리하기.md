- ê°ì²´ì§€í–¥ ì„¤ê³„ì˜ í•µì‹¬ì€ í˜‘ë ¥ì„ ìœ„í•´ í•„ìš”í•œ ì˜ì¡´ì„±ì€ ìœ ì§€í•˜ë©´ì„œë„ ë³€ê²½ì„ ë°©í•´í•˜ëŠ” ì˜ì¡´ì„±ì€ ì œê±°í•˜ëŠ” ê²ƒì´ë‹¤.
# ğŸ™ ì˜ì¡´ì„± ì´í•´í•˜ê¸°
## ë³€ê²½ê³¼ ì˜ì¡´ì„±
> ì–´ë–¤ ê°ì²´ê°€ í˜‘ë ¥í•˜ê¸° ìœ„í•´ ë‹¤ë¥¸ ê°ì²´ë¥¼ í•„ìš”ë¡œ í•  ë•Œ ë‘ ê°ì²´ ì‚¬ì´ì— ì˜ì¡´ì„±ì´ ì¡´ì¬í•˜ê²Œ ëœë‹¤.

- ì‹¤í–‰ ì‹œì : ì˜ì¡´í•˜ëŠ” ê°ì²´ê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ê¸° ìœ„í•´ì„œëŠ” ì‹¤í–‰ ì‹œì— ì˜ì¡´ ëŒ€ìƒ ê°ì²´ê°€ ë°˜ë“œì‹œ ì¡´ì¬í•´ì•¼ í•¨
- êµ¬í˜„ ì‹œì : ì˜ì¡´ëŒ€ìƒ ê°ì²´ê°€ ë³€ê²½ë  ê²½ìš° ì˜ì¡´í•˜ëŠ” ê°ì²´ë„ í•¨ê»˜ ë³€ê²½ë¨

```typescript title="PeriodCondition í´ë˜ìŠ¤ isSatisfiedBy ë©”ì„œë“œ"
class PeriodCondition implements DiscountCondition {
  private _dayOfWeek: DayOfWeek;
  private _startTime: LocalTime;
  private _endTime: LocalTime;

  constructor(dayOfWeek: number, startTime: number, endTime: number) {
    this._dayOfWeek = dayOfWeek;
    this._startTime = startTime;
    this._endTime = endTime;
  }

  isSatisfiedBy(screening: Screening): Boolean {
    return (
      screening.getStartTime().getDayOfWeek() === this._dayOfWeek &&
      this._startTime <= screening.getStartTime().getTime() &&
      this._endTime >= screening.getStartTime().getTime()
    );
  }
}
```

> ì‹¤í–‰ì‹œì ì— `PeriodCondition` ì¸ìŠ¤í„´ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ê¸° ìœ„í•´ì„œëŠ” `Screening` ì¸ìŠ¤í„´ìŠ¤ê°€ ì¡´ì¬í•´ì•¼ í•œë‹¤.
> ì–´ë–¤ ê°ì²´ê°€ ì˜ˆì •ëœ ì‘ì—…ì„ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ë‹¤ë¥¸ ê°ì²´ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” ê²½ìš° ë‘ ê°ì²´ ì‚¬ì´ì— *ì˜ì¡´ì„±* ì´ ì¡´ì¬í•œë‹¤ê³  ë§í•œë‹¤.

- ì˜ì¡´ì„±ì€ ë°©í–¥ì„±ì„ ê°€ì§€ë©° í•­ìƒ ë‹¨ë°©í–¥ì´ë‹¤.
- ì˜ì¡´ì„±ì€ ë³€ê²½ì— ì˜í•œ ì˜í–¥ì˜ ì „íŒŒ ê°€ëŠ¥ì„±ì„ ì•”ì‹œí•œë‹¤.

> `PeriodCondition` ì€ `DaOfWeek` ì™€ `LocalTime` , `Screening` ì— ëŒ€í•´ ì˜ì¡´ì„±ì„ ê°€ì§„ë‹¤.

- `DayOfWeek` , `LocalTime` , `Screening` , `DiscountCondition` ì´ ë³€ê²½ëœë‹¤ë©´ `PeriodCOndition` ë„ í•¨ê»˜ ë³€ê²½ ë  ìˆ˜ ìˆë‹¤ëŠ”ê²Œ ìš”ì ì´ë‹¤.
- `DayOfWeek` : `PeriodCondition` ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ ì‚¬ìš© ëœë‹¤.
- `LocalTime` : `PeriodCondition` ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ ì‚¬ìš© ëœë‹¤.
- `Screening` : `PeriodCondition` ì˜ ë©”ì„œë“œ ì¸ìë¡œ ì‚¬ìš©ëœë‹¤.
- `DiscountCondition` : `PeriodCondition` ì´ ì˜ì¡´í•˜ëŠ” ì´ìœ ëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì •ì˜ëœ ì˜¤í¼ë ˆì´ì…˜ë“¤ì„ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì˜ ì¼ë¶€ë¡œ í¬í•¨ì‹œí‚¤ê¸° ìœ„í•´ ì˜ì¡´í•œë‹¤.

## ì˜ì¡´ì„± ì „ì´
- *ì˜ì¡´ì„± ì „ì´(transitive dependency)*
	- `PeriodCondition` ì´ `Screening` ì— ì˜ì¡´í•  ê²½ìš° `PeriodCondition` ì€ `Screening` ì— ì˜ì¡´í•˜ëŠ” ëŒ€ìƒì— ëŒ€í•´ì„œë„ ìë™ì ìœ¼ë¡œ ì˜ì¡´í•˜ê²Œ ëœë‹¤.
	- Screeningì´ Movie, LocalDateTime, Customerì— ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— PeriodCondition ì—­ì‹œ ê°„ì ‘ì ìœ¼ë¡œ Movie, LocalDateTime, Customerì— ì˜ì¡´í•˜ê²Œ ëœë‹¤.
	- ì˜ì¡´ì„±ì´ ì‹¤ì œë¡œ ì „ì´ë ì§€ ì—¬ë¶€ëŠ” ë³€ê²½ì˜ ë°©í–¥ê³¼ ìº¡ìŠí™”ì˜ ì •ë„ì— ë”°ë¼ ë‹¬ë¼ì§€ë©° ëª¨ë“  ê²½ìš°ì— ì˜ì¡´ì„±ì´ ì „ì´ë˜ëŠ”ê²ƒì€ ì•„ë‹ˆë‹¤.

- ì˜ì¡´ì„± ì¢…ë¥˜
	- ì§ì ‘ ì˜ì¡´ì„±(direct dependency) : í•œ ìš”ì†Œê°€ ë‹¤ë¥¸ ìš”ì†Œì— ì§ì ‘ì˜ì¡´í•˜ëŠ” ê²½ìš°ë¥¼ ê°€ë¦¬í‚´.
	- ê°„ì ‘ ì˜ì¡´ì„±(indirect dependency) : ì§ì ‘ì ì¸ ê´€ê³„ëŠ” ì¡´ì¬í•˜ì§€ ì•Šì§€ë§Œ ì˜ì¡´ì„± ì „ì´ì— ì˜í•´ ì˜í–¥ì´ ì „íŒŒë˜ëŠ” ê²½ìš°

## ëŸ°íƒ€ì„ ì˜ì¡´ì„±ê³¼ ì»´íŒŒì¼íƒ€ì„ ì˜ì¡´ì„±
> #ê°ì²´ì§€í–¥/ëŸ°íƒ€ì„ì˜ì¡´ì„±-ì»´íŒŒì¼íƒ€ì…ì˜ì¡´ì„± 

- ëŸ°íƒ€ì„(run-time) : ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ëŠ” ì‹œì ì„ ê°€ë¦¬í‚¨ë‹¤.
- ì»´íŒŒì¼ íƒ€ì„(compile-time) : ì¼ë°˜ì ìœ¼ë¡œëŠ” ì‘ì„±ëœ ì½”ë“œë¥¼ ì»´íŒŒì¼í•˜ëŠ” ì‹œì ì„ ê°€ë¦¬í‚¤ì§€ë§Œ ë¬¸ë§¥ì— ë”°ë¼ì„œ ì½”ë“œ ê·¸ìì²´ë¥¼ ê°€ë¦¬í‚¤ê¸°ë„ í•¨.
- ëŸ°íƒ€ì„ ì˜ì¡´ì„±ê³¼ ì»´íŒŒì¼íƒ€ì„ ì˜ì¡´ì„±ì´ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.
### ëŸ°íƒ€ì„ ì˜ì¡´ì„±
- ëŸ°íƒ€ì„ ì˜ì¡´ì„±ì´ ë‹¤ë£¨ëŠ” ì£¼ì œëŠ” ê°ì²´ ì‚¬ì´ì˜ ì˜ì¡´ì„±ì´ë‹¤.
### ì»´íŒŒì¼ íƒ€ì„ ì˜ì¡´ì„±
- ì»´íŒŒì¼ íƒ€ì„ ì˜ì¡´ì„±ì´ ë‹¤ë£¨ëŠ” ì£¼ì œëŠ” í´ë˜ìŠ¤ ì‚¬ì´ì˜ ì˜ì¡´ì„±ì´ë‹¤.


### ì»´íŒŒì¼ íƒ€ì„ ì˜ì¡´ì„± ê´€ì ì—ì„œ Movie í´ë˜ìŠ¤
```typescript title="Movie í´ë˜ìŠ¤"
class Movie {
  // ...
  private _discountPolicy: DiscountPolicy;

  constructor(
    title: string,
    runningTime: number,
    fee: Money,
    discountPolicy: DiscountPolicy
  ) {
    // ...
    this._discountPolicy = discountPolicy;
  }

	// ...
  public calculateMovieFee(screening: Screening) {
    return this._fee.minus(
      this._discountPolicy.calculateDiscountAmount(screening)
    );
  }
}
```

> Movie í´ë˜ìŠ¤ì—ì„œ AmountDiscountPolicy í´ë˜ìŠ¤ì™€ PercentDiscountPolicy í´ë˜ìŠ¤ë¡œ í–¥í•˜ëŠ” ì–´ë–¤ ì˜ì¡´ì„±ë„ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
> *Movie í´ë˜ìŠ¤ëŠ” ì˜¤ì§ ì¶”ìƒ í´ë˜ìŠ¤ì¸ DiscountPolicy í´ë˜ìŠ¤ì—ë§Œ ì˜ì¡´í•œë‹¤.* 

### ëŸ°íƒ€ì„ ì˜ì¡´ì„± ê´€ì ì—ì„œ Movie í´ë˜ìŠ¤
- ê¸ˆì•¡ í• ì¸ ì •ì±…ì„ ì ìš©í•˜ê¸° ìœ„í•´ `AmountDiscountPolicy` ì˜ ì¸ìŠ¤í„´ìŠ¤ì™€ í˜‘ë ¥í•´ì•¼ í•œë‹¤.
- ë¹„ìœ¨ í• ì¸ ì •ì±…ì„ ì ìš©í•˜ê¸° ìœ„í•´ `PercentDiscountPolicy` ì˜ ì¸ìŠ¤í„´ìŠ¤ì™€ í˜‘ë ¥í•´ì•¼ í•œë‹¤.
- ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ì‹œì (ì»´íŒŒì¼ íƒ€ì„)ì˜ Movie í´ë˜ìŠ¤ëŠ” AmountDiscountPolicyì™€ PercentDiscountPolicy í´ë˜ìŠ¤ì˜ ì¡´ì¬ì— ëŒ€í•´ ì „í˜€ ì•Œì§€ ëª»í•˜ì§€ë§Œ ì‹¤í–‰ì‹œì (ëŸ°íƒ€ì„)ì—ì„œëŠ” ë‘ ì¸ìŠ¤í„´ìŠ¤ì™€ í˜‘ë ¥í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

### ê²°ë¡ 
- ì–´ë–¤ í´ë˜ìŠ¤ê°€ ì¸ìŠ¤í„´ìŠ¤ê°€ ë‹¤ì–‘í•œ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì™€ í˜‘ë ¥í•˜ê¸° ìœ„í•´ì„œëŠ” í˜‘ë ¥í•  ì¸ìŠ¤í„´ìŠ¤ì˜ êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ë¥¼ ì•Œì•„ì„œëŠ” ì•ˆëœë‹¤.
- ì‹¤ì œë¡œ í˜‘ë ¥í•  ê°ì²´ê°€ ì–´ë–¤ ê²ƒì¸ì§€ëŠ” ëŸ°íƒ€ì„ì— í•´ê²° í•´ì•¼ í•œë‹¤.
- *ì»´íŒŒì¼íƒ€ì„ êµ¬ì¡°ì™€ ëŸ°íƒ€ì„ êµ¬ì¡°ì‚¬ì´ì˜ ê±°ë¦¬ê°€ ë©€ë©´ ë©€ìˆ˜ë¡ ì„¤ê³„ê°€ ìœ ì—°í•´ì§€ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•´ì§„ë‹¤.* 

## ì»¨í…ìŠ¤íŠ¸ ë…ë¦½ì„±
- ì»¨í…ìŠ¤íŠ¸ ë…ë¦½ì„± : í´ë˜ìŠ¤ê°€ ì‚¬ìš©ë  íŠ¹ì •í•œ ë¬¸ë§¥ì— ëŒ€í•´ ìµœì†Œí•œì˜ ê°€ì •ë§Œìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤ë©´ ë‹¤ë¥¸ ë¬¸ë§¥ì—ì„œ ì¬ì‚¬ìš©í•˜ê¸°ê°€ ë” ìˆ˜ì›”í•´ì§„ë‹¤.
> ì„¤ê³„ê°€ ë” ìœ ì—°í•´ì§€ê¸° ìœ„í•´ì„œëŠ” ì»¨í…ìŠ¤íŠ¸ì— ëŒ€í•œ êµ¬ì²´ì ì¸ ì •ë³´ë¥¼ ìµœëŒ€í•œ ì ê²Œ ì•Œì•„ì•¼ í•¨.
> ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ê°ì²´ê°€ ì»¨í…ìŠ¤íŠ¸ ë…ë¦½ì ì´ë¼ë©´ ì‹œìŠ¤í…œì€ ë³€ê²½í•˜ê¸° ì‰½ë‹¤.

## ì˜ì¡´ì„± í•´ê²°í•˜ê¸°
- ì»´íŒŒì¼íƒ€ì„ ì˜ì¡´ì„±ì€ êµ¬ì²´ì ì¸ ëŸ°íƒ€ì„ ì˜ì¡´ì„±ìœ¼ë¡œ ëŒ€ì²´ë¼ì•¼ í•œë‹¤.
- ì˜ì¡´ì„± í•´ê²° : ì»´íŒŒì¼ íƒ€ì„ ì˜ì¡´ì„±ì„ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì— ë§ëŠ” ì ì ˆí•œ ëŸ°íƒ€ì„ ì˜ì¡´ì„±ìœ¼ë¡œ êµì²´í•˜ëŠ” ê²ƒ
	- ê°ì²´ë¥¼ ì‹¤í–‰í•˜ëŠ” ì‹œì ì— ìƒì„±ìë¥¼ í†µí•´ ì˜ì¡´ì„± í•´ê²°
	- ê°ì²´ ìƒì„± í›„ setter ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì˜ì¡´ì„± í•´ê²°
	- ë©”ì„œë“œ ì‹¤í–‰ ì‹œ ì¸ìë¥¼ ì´ìš©í•´ ì˜ì¡´ì„± í•´ê²°

### ê°ì²´ë¥¼ ì‹¤í–‰í•˜ëŠ” ì‹œì ì— ìƒì„±ìë¥¼ í†µí•´ ì˜ì¡´ì„± í•´ê²°
```typescript
// ì˜í™”ì˜ ìš”ê¸ˆ ê³„ì‚°ì— ê¸ˆì•¡ í• ì¸ ì •ì±…ì„ ì ìš©í•˜ê³  ì‹¶ì„ë•Œ
const avatar: Movie = new Movie("ì•„ë°”íƒ€", 
Duration.ofMinutes(120), 
Money.wons(10000), 
new AmountDiscountPolicy(...));

// ë¹„ìœ¨ í• ì¸ ì •ì±…ì— ë”°ë¼ ìš”ê¸ˆì„ ê³„ì‚°í• ë•Œ
const starWars: Movie = new Movie("ìŠ¤íƒ€ì›Œì¦ˆ", 
Duration.ofMinutes(180),
Money.wons(11000),
new PercentDiscountPolicy(...));
```

- ì˜í™”ì˜ ìš”ê¸ˆ ê³„ì‚°ì— ê¸ˆì•¡ í• ì¸ ì •ì±…ì„ ì ìš©í•˜ê³  ì‹¶ì„ë•Œ
	- Movie ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ AmountDiscountPolicyì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ Movie ìƒì„±ìë¡œ ì „ë‹¬
- ë¹„ìœ¨ í• ì¸ ì •ì±…ì— ë”°ë¼ ìš”ê¸ˆì„ ê³„ì‚°í• ë•Œ
	- Movieì˜ ìƒì„±ìì— PercentDiscountPolicyì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì „ë‹¬

### ê°ì²´ ìƒì„± í›„ setter ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ì˜ì¡´ì„± í•´ê²°
```typescript
class Movie {
  private _title: string;
  private _runningTime: number;
  private _fee: Money;
  private _discountPolicy: DiscountPolicy;

  constructor(
    title: string,
    runningTime: number,
    fee: Money,
    discountPolicy: DiscountPolicy
  ) {
    this._title = title;
    this._runningTime = runningTime;
    this._fee = fee;
    this._discountPolicy = discountPolicy;
  }


  set discountPolicy(discountPolicy: DiscountPolicy): void {
    this._discountPolicy = discountPolicy;
  }
}

const avatar = new Movie(...);
avatar.discountPolicy = new AmountDiscountPolicy(...);

// ê¸ˆì•¡ í• ì¸ ì •ì±…ìœ¼ë¡œ ì„¤ì •ëœ Movieì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¹„ìœ¨ í• ì¸ ì •ì±…ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥
const avatar2 = new Movie(...);
avatar.setDiscountPolicy(new AmountDiscountPolicy(...));
... // ì—¬ê¸°ê¹Œì§€ ê¸ˆì•¡ í• ì¸ ì •ì±…ìœ¼ë¡œ ìˆ˜í–‰
avatar.setDiscountPolicy(new PercentDiscountPolicy(...));
```

- Movieì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œ í›„ì— setter ë©”ì„œë“œë¥¼ ì´ìš©í•´ ì˜ì¡´ì„± í•´ê²°
- setter ë©”ì„œë“œë¥¼ ì´ìš©í•˜ëŠ” ë°©ì‹ì€ ê°ì²´ë¥¼ ìƒì„±í•œ ì´í›„ì—ë„ ì˜ì¡´í•˜ê³  ìˆëŠ” ëŒ€ìƒì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ê°€ëŠ¥ì„±ì„ ì—´ì–´ ë†“ê³  ì‹¶ì„ë•Œ ìœ ìš©í•˜ë‹¤.

```typescript title="ìƒì„±ì ë°©ì‹ê³¼ setter ë°©ì‹ì„ í˜¼í•©"
const avatar = new Movie(..., new PercentDiscountPolicy(...));
...
avatar.setDiscountPolicy(new AmountDiscountPolicy(...));
```

- ë” ì¢‹ì€ ë°©ì‹ì€ ìƒì„±ì ë°©ì‹ê³¼ setterë°©ì‹ì„ í˜¼í•© í•œ ë°©ì‹ì´ë‹¤.

### ë©”ì„œë“œ ì‹¤í–‰ ì‹œ ì¸ìë¥¼ ì´ìš©í•´ ì˜ì¡´ì„± í•´ê²°
```typescript
class Movie {
  // ...
  private _fee: Money;

  constructor(
    title: string,
    runningTime: number,
    fee: Money,
  ) {
    // ...
    this._fee = fee;
  }

	// ...
  public calculateMovieFee(screening: Screening,
  discountPolicy: discountPolicy) {
    return this._fee.minus(
      discountPolicy.calculateDiscountAmount(screening)
    );
  }
}
```

- Movieê°€ í•­ìƒ í• ì¸ ì •ì±…ì„ ì•Œ í•„ìš”ê¹Œì§€ëŠ” ì—†ê³  ê°€ê²©ì„ ê³„ì‚°í•  ë•Œë§Œ ì¼ì‹œì ìœ¼ë¡œ ì•Œì•„ë„ ë¬´ë°©í•˜ë‹¤ë©´ ë©”ì„œë“œì˜ ì¸ìë¥¼ ì´ìš©í•´ ì˜ì¡´ì„±ì„ í•´ê²°í•  ìˆ˜ ë„ ìˆë‹¤.

### ê²°ë¡ 
- *ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆë§Œ ì¼ì‹œì ìœ¼ë¡œ ì˜ì¡´ ê´€ê³„ê°€ ì¡´ì¬í•´ë„ ë¬´ë°©í•˜ê±°ë‚˜,* *ë©”ì„œë“œê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ì˜ì¡´ ëŒ€ìƒì´ ë§¤ë²ˆ ë‹¬ë¼ì ¸ì•¼ í•˜ëŠ” ê²½ìš°* ë©”ì„œë“œ ì‹¤í–‰ ì‹œ ì¸ìë¥¼ ì´ìš©í•´ ì˜ì¡´ì„± í•´ê²°í•˜ë©´ ìœ ìš©í•˜ë‹¤
- í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì— ë§¤ë²ˆ ë™ì¼í•œ ê°ì²´ë¥¼ ì¸ìë¡œ ì „ë‹¬í•˜ê³  ìˆë‹¤ë©´ *ìƒì„±ìë¥¼ ì´ìš©í•˜ëŠ” ë°©ì‹* ì´ë‚˜ *setter* ë©”ì„œë“œë¥¼ ì´ìš©í•´ ì˜ì¡´ì„±ì„ ì§€ì†ì ìœ¼ë¡œ ìœ ì§€í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì¢‹ë‹¤.
# ğŸ¦ ìœ ì—°í•œ ì„¤ê³„

## ì˜ì¡´ì„±ê³¼ ê²°í•©ë„
```typescript title="Movieê°€ ë¹„ìœ¨í• ì¸ ì •ì±… PercentDiscountPolicyì— ì§ì ‘ ì˜ì¡´í•œë‹¤ê³  ê°€ì •"
class Movie {
  // ...
  private _percentDiscountPolicy: PercentDiscountPolicy;

  constructor(
    title: string,
    runningTime: number,
    fee: Money,
    percentDiscountPolicy: PercentDiscountPolicy
  ) {
    // ...
    this._percentDiscountPolicy = percentDiscountPolicy;
  }

	// ...
  public calculateMovieFee(screening: Screening) {
    return this._fee.minus(
      this._percentDiscountPolicy.calculateDiscountAmount(screening)
    );
  }
}
```

- ë¹„ìœ¨ í• ì¸ ì •ì±…ì„ ì ìš©í•˜ê¸° ìœ„í•´ Movieê°€ PercentDiscountPolicyì— ì˜ì¡´í•˜ê³  ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì½”ë“œë¥¼ í†µí•´ ëª…ì‹œì ìœ¼ë¡œ ë“œëŸ¬ë‚¸ë‹¤.
- ë¬¸ì œëŠ” ì˜ì¡´ì„± ì¡´ì¬ê°€ ì•„ë‹ˆë¼ ì˜ì¡´ì„±ì˜ ì •ë„ì´ë‹¤.
### ë°”ëŒì§í•œ ì˜ì¡´ì„±
- ë°”ëŒì§í•œ ì˜ì¡´ì„± : *ì¬ì‚¬ìš©* ê³¼ ê´€ë ¨ì´ ìˆë‹¤. ì–´ë–¤ ì˜ì¡´ì„±ì´ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ í´ë˜ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ì—†ë„ë¡ ì œí•œí•œë‹¤ë©´ ê·¸ ì˜ì¡´ì„±ì€ ë°”ëŒì§í•˜ì§€ ëª»í•˜ë‹¤.
- ì–´ë–¤ ì˜ì¡´ì„±ì´ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ë©´ ê·¸ ì˜ì¡´ì„±ì€ ë°”ëŒì§í•œ ê²ƒì´ë‹¤.
- ì»¨í…ìŠ¤íŠ¸ì— ë…ë¦½ì ì¸ ì˜ì¡´ì„±ì€ ë°”ëŒì§í•œ ì˜ì¡´ì„±ì´ê³  íŠ¹ì •í•œ ì»¨í…ìŠ¤íŠ¸ì— ê°•í•˜ê²Œ ê²°í•©ëœ ì˜ì¡´ì„±ì€ ë°”ëŒì§í•˜ì§€ ì•Šì€ ì˜ì¡´ì„±ì´ë‹¤.
## ìì‹ì´ ê²°í•©ì„ ë‚³ëŠ”ë‹¤.
- ì„œë¡œì— ëŒ€í•´ ì•Œê³  ìˆëŠ” ì§€ì‹ì˜ ì–‘ì´ ê²°í•©ë„ë¥¼ ê²°ì •í•œë‹¤.
- ë” ë§ì´ ì•Œê³  ìˆë‹¤ëŠ” ê²ƒì€ ë” ì ì€ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
- ê²°í•©ë„ë¥¼ ëŠìŠ¨í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” í˜‘ë ¥í•˜ëŠ” ëŒ€ìƒì— ëŒ€í•´ í•„ìš”í•œ ì •ë³´ ì™¸ì—ëŠ” ìµœëŒ€í•œ ê°ì¶”ëŠ”ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.
- ê°€ì¥ íš¨ê³¼ì ì¸ ë°©ë²•ì€ ì¶”ìƒí™”ë‹¤.

> Movie í´ë˜ìŠ¤ê°€ PercentDiscountPolicy í´ë˜ìŠ¤ì— ì˜ì¡´ -> í˜‘ë ¥í•  ê°ì²´ê°€ ë¹„ìœ¨ í• ì¸ ì •ì±…ì— ë”°ë¼ í• ì¸ ìš”ê¸ˆì„ ê³„ì‚° í•  ê²ƒì´ë¼ëŠ”ê²ƒì„ ì•Œê³  ìˆë‹¤. -> ê²°í•©ë„ ë†’ë‹¤.
   Movie í´ë˜ìŠ¤ê°€ DiscountPolicy í´ë˜ìŠ¤ì— ì˜ì¡´ -> êµ¬ì²´ì ì¸ ê³„ì‚° ì•Œ í•„ìš”ê°€ ì—†ë‹¤ -> ê²°í•©ë„ ë‚®ë‹¤.

## ì¶”ìƒí™”ì— ì˜ì¡´í•˜ë¼
> ì¶”ìƒí™”ë€ ì–´ë–¤ ì–‘ìƒ, ì„¸ë¶€ì‚¬í•­, êµ¬ì¡°ë¥¼ ì¢€ ë” ëª…í™•í•˜ê²Œ ì´í•´í•˜ê¸° ìœ„í•´ íŠ¹ì • ì ˆì°¨ë‚˜ ë¬¼ì²´ë¥¼ ì˜ë„ì ìœ¼ë¡œ ìƒëµí•˜ê±°ë‚˜ ê°ì¶¤ìœ¼ë¡œì¨ ë³µì¡ë„ë¥¼ ê·¹ë³µí•˜ëŠ” ë°©ë²•ì´ë‹¤.

- `DiscountPolicy` í´ë˜ìŠ¤ëŠ” `PercentDiscountPolicy` í´ë˜ìŠ¤ê°€ ë¹„ìœ¨ í• ì¸ ì •ì±…ì— ë”°ë¼ í• ì¸ ìš”ê¸ˆì„ ê³„ì‚° í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ìˆ¨ê²¨ì£¼ê¸° ë•Œë¬¸ì— `PercentDiscountPolicy` ì˜ ì¶”ìƒí™”ë‹¤.

- ì¶”ìƒí™”ì™€ ê²°í•©ë„ì˜ ê´€ì ì—ì„œ ì˜ì¡´ ëŒ€ìƒì„ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ë¶„í•˜ëŠ”ê²ƒì´ ìœ ìš©í•˜ë‹¤.
	- êµ¬ì²´ í´ë˜ìŠ¤ ì˜ì¡´ì„±(concrete class dependency)
	- ì¶”ìƒ í´ë˜ìŠ¤ ì˜ì¡´ì„±(abstract class dependency)
	- ì¸í„°í˜ì´ìŠ¤ ì˜ì¡´ì„±(interface dependency)

> êµ¬ì²´ í´ë˜ìŠ¤ : ë©”ì„œë“œì˜ ë‚´ë¶€ êµ¬í˜„ê³¼ ìì‹ í´ë˜ìŠ¤ì˜ ì¢…ë¥˜ì— ëŒ€í•œ ì§€ì‹ì„ ì•Œì•„ì•¼ í•¨.
> ì¶”ìƒ í´ë˜ìŠ¤ : í˜‘ë ¥í•˜ëŠ” ëŒ€ìƒì´ ì†í•œ í´ë˜ìŠ¤ ìƒì† ê³„ì¸µì´ ë¬´ì—‡ì¸ì§€ì— ëŒ€í•´ì„œëŠ” ì•Œê³  ìˆì–´ì•¼í•¨.
> ì¸í„°í˜ì´ìŠ¤ : ìƒì† ê³„ì¸µì„ ëª¨ë¥´ë”ë¼ë„ í˜‘ë ¥ì´ ê°€ëŠ¥í•´ì§„ë‹¤.
> ê²°í•©ë„ë¥¼ ëŠìŠ¨í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ -> ì¶”ìƒ í´ë˜ìŠ¤ -> ì¸í„°í˜ì´ìŠ¤

### ê²°ë¡ 
- ì˜ì¡´í•˜ëŠ” ëŒ€ìƒì´ ë” ì¶”ìƒì ì¼ìˆ˜ë¡ ê²°í•©ë„ëŠ” ë” ë‚®ì•„ì§„ë‹¤.

## ëª…ì‹œì ì¸ ì˜ì¡´ì„±
- í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤(public interface)ë¥¼ í†µí•´ ì˜ì¡´ì„±ì€ ëª…ì‹œì ìœ¼ë¡œ í‘œí˜„ë˜ì–´ì•¼ í•œë‹¤.

> ì˜ì¡´ì„±ì„ êµ¬í˜„ ë‚´ë¶€ì— ìˆ¨ê²¨ë‘ë©´ ì•ˆëœë‹¤. 

```typescript title="ì˜ì¡´ì„±ì„ êµ¬í˜„í´ë˜ìŠ¤ì— ìˆ¨ê²¨ë‘ë©´ ì•ˆëœë‹¤"
class Movie {
  // ...
  private _discountPolicy: DiscountPolicy;

  constructor(
    title: string,
    runningTime: number,
    fee: Money,
    discountPolicy: DiscountPolicy
  ) {
    // ...
    this._discountPolicy = new AmountDiscountPolicy(...); // âŒ
  }
}
```

- ëª…ì‹œì ì¸ ì˜ì¡´ì„±ì„ ì‚¬ìš©í•´ì•¼ë§Œ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì»´íŒŒì¼ íƒ€ì„ ì˜ì¡´ì„±(Movieí´ë˜ìŠ¤ì™€ DiscountPolicy í´ë˜ìŠ¤ê°„ì˜ ì˜ì¡´ì„±) ì„ ëŸ°íƒ€ì„ ì˜ì¡´ì„±(AmountDiscountPolicy, PercentDiscountPolicy) ìœ¼ë¡œ êµì²´í•  ìˆ˜ ìˆë‹¤.
## newëŠ” í•´ë¡­ë‹¤
- ê²°í•©ë„ ì¸¡ë©´ì—ì„œ newê°€ í•´ë¡œìš´ ì´ìœ 
	1. new ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” êµ¬ì²´ í´ë˜ìŠ¤ì˜ ì´ë¦„ì„ ì§ì ‘ ê¸°ìˆ í•´ì•¼ í•¨
		- newë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ëŠ” ì¶”ìƒí™”ê°€ ì•„ë‹Œ êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´í•  ìˆ˜ë°–ì— ì—†ê¸° ë•Œë¬¸ì— ê²°í•©ë„ê°€ ë†’ì•„ì§„ë‹¤.
	2. new ì—°ì‚°ìë¥¼ ìƒì„±í•˜ë ¤ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ë¿ë§Œ ì•„ë‹ˆë¼ ì–´ë–¤ ì¸ìë¥¼ ì´ìš©í•´ í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ì•¼ í•˜ëŠ”ì§€ë„ ì•Œì•„ì•¼ í•œë‹¤.
		- newë¥¼ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ê°€ ì•Œì•„ì•¼ í•˜ëŠ” ì§€ì‹ì˜ ì–‘ì´ ëŠ˜ì–´ë‚˜ê¸° ë•Œë¬¸ì— ê²°í•©ë„ê°€ ë†’ì•„ì§„ë‹¤.

## ê°€ë”ì€ ìƒì„±í•´ë„ ë¬´ë°©í•˜ë‹¤
- ì£¼ë¡œ í˜‘ë ¥í•˜ëŠ” ê¸°ë³¸ ê°ì²´ë¥¼ ì„¤ì •í•˜ê³  ì‹¶ì€ ê²½ìš°ê°€ ì—¬ê¸°ì— ì†í•œë‹¤.

## í‘œì¤€ í´ë˜ìŠ¤ì— ëŒ€í•œ ì˜ì¡´ì€ í•´ë¡­ì§€ ì•Šë‹¤.
- JDKì˜ í‘œì¤€ ì»¬ë ‰ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì†í•˜ëŠ” ArrayListëŠ” ì½”ë“œê°€ ìˆ˜ì •ë  í™•ë¥ ì´ ê±°ì˜ ì—†ê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§ì ‘ ìƒì„±(new) í•˜ë”ë¼ë„ ë¬¸ì œê°€ ë˜ì§€ì•ŠëŠ”ë‹¤.

## ì»¨í…ìŠ¤íŠ¸ í™•ì¥í•˜ê¸°
> ë‹¤ë¥¸ ì»¨í…ìŠ¤íŠ¸ì—ì„œ Movieë¥¼ í™•ì¥í•´ì„œ ì¬ì‚¬ìš©í•˜ëŠ” ë‘ê°€ì§€ ì˜ˆì‹œ

1. í• ì¸ í˜œíƒì„ ì œê³µí•˜ì§€ ì•ŠëŠ” ì˜í™”ì˜ ì˜ˆë§¤ ìš”ê¸ˆì„ ê³„ì‚°í•˜ëŠ” ê²½ìš°

```typescript title="í• ì¸ í˜œíƒì„ ì œê³µí•˜ì§€ ì•ŠëŠ” ì˜í™”ì˜ ì˜ˆë§¤ ìš”ê¸ˆì„ ê³„ì‚°í•˜ëŠ” ê²½ìš°"
class Movie {
  private _title: string;
  private _runningTime: number;
  private _fee: Money;
  private _percentDiscountPolicy: PercentDiscountPolicy;
  
  constructor(
    title: string,
    runningTime: number,
    fee: Money,
    percentDiscountPolicy?: PercentDiscountPolicy
  ) {
	this._title = title;
	this._runningTime =runningTime;
	this._fee = fee;
	if(percentDiscountPolicy){
		// TSëŠ” ìƒì„±ì ì˜¤ë²„ë¡œë”©ì„ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì˜µì…”ë„ë¡œ ëŒ€ì²´
		this._percentDiscountPolicy = percentDiscountPolicy;
	}
  }

  public calculateMovieFee(screening: Screening): Money {

	if(!this._percentDiscountPolicy) return this._fee;
	
    return this._fee.minus(
      this._percentDiscountPolicy.calculateDiscountAmount(screening)
    );
  }

}
```

> ì˜ˆì™¸ ì¼€ì´ìŠ¤ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ Movieì˜ ë‚´ë¶€ ì½”ë“œë¥¼ ì§ì ‘ ìˆ˜ì • í•˜ëŠ”ê²ƒì€ ë²„ê·¸ì˜ ë°œìƒ ê°€ëŠ¥ì„±ì„ ë†’ì¸ë‹¤.
> í•´ê²° ë°©ë²•ì€ í• ì¸ ì •ì±…ì´ ì¡´ì¬ í•˜ì§€ ì•Šì„ë•Œ ì˜ˆì™¸ ì¼€ì´ìŠ¤ë¡œ ì²˜ë¦¬í•˜ì§€ ë§ê³  ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í• ì¸ ì •ì±…ì˜ í•œ ì¢…ë¥˜ë¡œ ê°„ì£¼í•˜ê³  ì¶”ê°€í•œë‹¤.

```typescript
class NoneDiscountPolicy extends DiscountPolicy {
    protected override getDiscountAmount(screening: Screening): Money{
        return Money.ZERO;
    }
}

const avatar: Movie = new Movie("ì•„ë°”íƒ€",Duration.ofMinutes(120), Money.wons(10000), new NoneDiscountPolicy());
```

> Movie í´ë˜ìŠ¤ì— ì˜ˆì™¸ì²˜ë¦¬ Ifë¬¸ì„ ì¶”ê°€ í•˜ì§€ ì•Šê³ ë„ í• ì¸ í˜œíƒì„ ì œê³µí•˜ì§€ ì•ŠëŠ” ì˜í™”ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.


2. ì¤‘ë³µ ì ìš©ì´ ê°€ëŠ¥í•œ í• ì¸ ì •ì±…ì„ êµ¬í˜„í•˜ëŠ” ê²ƒ

> ê¸ˆì•¡ í• ì¸ ì •ì±…ê³¼ ë¹„ìœ¨ í• ì¸ ì •ì±…ì„ í˜¼í•©í•´ì„œ ì ìš©í•  ìˆ˜ ìˆëŠ” í• ì¸ ì •ì±…
> ì´ê²ƒ ì—­ì‹œ í• ì¸ ì •ì±…ì˜ í•œ ì¢…ë¥˜ë¡œ ê°„ì£¼í•˜ê³  ì¶”ê°€í•œë‹¤.

```typescript title="ì¤‘ë³µ ì ìš©ì´ ê°€ëŠ¥í•œ í• ì¸ ì •ì±… êµ¬í˜„"
class OverlappedDiscountPolicy extends DiscountPolicy {
  private _discountPolicies: DiscountPolicy[];

  constructor(discountPolicies: DiscountPolicy[]) {
    this._discountPolicies = discountPolicies;
  }

  protected override getDiscountAmount(screening: Screening): Money {
    let result: Money = Money.ZERO;

    for (const policy of this._discountPolicies) {
      result = result.plus(policy.calculateDiscountAmount(screening));
    }

    return result;
  }
}

const avatar: Movie = new Movie("ì•„ë°”íƒ€", Duration.ofMinutes(120), Money.wons(10000), new OverlappedDiscountPolicy(
[new AmountDiscountPolicy(...), new PercentDiscountPolicy(...)]))
```

- Movieë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ ì¤‘ë³µ í• ì¸ì„ ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆë‹¤.

## ì¡°í•© ê°€ëŠ¥í•œ í–‰ë™
- ì–´ë–¤ ê°ì²´ì™€ í˜‘ë ¥í•˜ëŠëƒì— ë”°ë¼ ê°ì²´ì˜ í–‰ë™ì´ ë‹¬ë¼ì§€ëŠ” ê²ƒì€ ìœ ì—°í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ê³„ê°€ ê°€ì§„ íŠ¹ì§•ì´ë‹¤.
- ìœ ì—°í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ê³„ëŠ” ì‘ì§‘ë„ ë†’ì€ ì±…ì„ë“¤ì„ ê°€ì§„ ì‘ì€ ê°ì²´ë“¤ì„ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì—°ê²°í•¨ìœ¼ë¡œì¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„ ì‰½ê²Œ í™•ì¥í•  ìˆ˜ ìˆë‹¤.
- ìœ ì—°í•˜ê²Œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ê³„ëŠ” ê°ì²´ê°€ ì–´ë–»ê²Œ(how) í•˜ëŠ”ì§€ë¥¼ ì¥í™©í•˜ê²Œ ë‚˜ì—´í•˜ì§€ ì•Šê³ ë„ ê°ì²´ë“¤ì˜ ì¡°í•©ì„ í†µí•´ ë¬´ì—‡(what)ì„ í•˜ëŠ”ì§€ë¥¼ í‘œí˜„í•˜ëŠ” í´ë˜ìŠ¤ë“¤ë¡œ êµ¬ì„±ëœë‹¤.
- ìœ ì—°í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ê³„ëŠ” ì‘ì€ ê°ì²´ë“¤ì˜ í–‰ë™ì„ ì¡°í•©í•¨ìœ¼ë¡œì¨ ìƒˆë¡œìš´ í–‰ë™ì„ ì´ëŒì–´ë‚¼ ìˆ˜ ìˆëŠ” ì„¤ê³„ë‹¤.
- í›Œë£½í•œ ê°ì²´ì§€í–¥ ì„¤ê³„ë€ *ì˜ì¡´ì„± ê´€ë¦¬ê°€ í•µì‹¬ì´ê³ * ê°ì²´ê°€ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ë¥¼ í‘œí˜„í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê°ì²´ë“¤ì˜ ì¡°í•©ì„ ì„ ì–¸ì ìœ¼ë¡œ í‘œí˜„í•˜ë¯€ë¡œì¨ ê°ì²´ë“¤ì´ ë¬´ì—‡ì„ í•˜ëŠ”ì§€ë¥¼ í‘œí˜„í•˜ëŠ” ì„¤ê³„ë‹¤.



