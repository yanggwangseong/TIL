
> ê°ì²´ì§€í–¥ì—ì„œ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ì „í†µì ì¸ ë°©ë²•ì€ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì´ë‹¤.
> ê°€ì¥ ëŒ€í‘œì ì¸ ê¸°ë²•ìœ¼ë¡œëŠ” ìƒì†ì´ ìˆë‹¤.

# ğŸ™ ìƒì†ê³¼ ì¤‘ë³µì½”ë“œ
## DRY ì›ì¹™
- DRY ì›ì¹™ : `Don't Repeat Yourself` ë°˜ë³µí•˜ì§€ ë§ˆë¼ëŠ” ëœ»
- ì¤‘ë³µ ì½”ë“œëŠ” ë³€ê²½ì„ ë°©í•´í•œë‹¤.
- ì¤‘ë³µ ì½”ë“œê°€ ê°€ì§€ëŠ” ë¬¸ì œì ì€ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ”ë°ì— í•„ìš”í•œ ë…¸ë ¥ì„ ëª‡ë°°ë¡œ ëŠ˜ë¦°ë‹¤.

## ì¤‘ë³µê³¼ ë³€ê²½
> ì˜ˆì‹œ
> í•œë‹¬ì— í•œë²ˆì”© ê°€ì…ìë³„ë¡œ ì „í™” ìš”ê¸ˆì„ ê³„ì‚°í•˜ëŠ” ê°„ë‹¨í•œ ì• í”Œë¦¬ì¼€ì´ì…˜

```ts title="ì˜ˆì œ ì¤‘ë³µì½”ë“œ"
/**
 * ê°œë³„ í†µí™” ê¸°ê°„ì„ ì €ì¥í•˜ëŠ” Call í´ë˜ìŠ¤
 * í†µí™” ì‹œì‘ ì‹œê°„(from)ê³¼ ì¢…ë£Œ ì‹œê°„(to)ì„ ì €ì¥í•œë‹¤.
 */
class Call {
  private from: Date;
  private to: Date;
  constructor(from: Date, to: Date) {
    this.from = from;
    this.to = to;
  }

  public get Duration(): number {
    return (this.to.getTime() - this.from.getTime()) / 1000;
  }

  public get From(): Date {
    return this.from;
  }
}

/**
 * ì „ì²´ í†µí™” ëª©ë¡ì— ëŒ€í•´ ì•Œê³  ìˆëŠ” ì •ë³´ ì •ë¬¸ê°€ì—ê²Œ ìš”ê¸ˆì„ ê³„ì‚° í•  ì±…ì„ì„ í• ë‹¹ í•´ì•¼ í•œë‹¤.
 * ê·¸ê²Œ ë°”ë¡œ Phoneí´ë˜ìŠ¤ì´ë‹¤.
 * amount : ë‹¨ìœ„ìš”ê¸ˆì„ ì €ì¥
 * seconds: ë‹¨ìœ„ ì‹œê°„ì„ ì €ì¥
 * calls: ì „ì²´ í†µí™” ëª©ë¡ì„ ì €ì¥
 */
class Phone {
  private amount: Money;
  private seconds: number;
  private calls: Call[] = [];

  constructor(amount: Money, seconds: number) {
    this.amount = amount;
    this.seconds = seconds;
  }

  public call(call: Call): void {
    this.calls.push(call);
  }

  public get Calls(): Call[] {
    return this.calls;
  }

  public get Amount(): Money {
    return this.amount;
  }

  public get Seconds(): number {
    return this.seconds;
  }

  public calculateFee() {
    let result = Money.ZERO;

    for (const call of this.calls) {
      result = result.plus(this.amount.times(call.Duration / this.seconds));
    }

    return result;
  }
}

class Money {
  static readonly ZERO = Money.wons(0);

  constructor(private _amount: number) {}

  static wons(amount: number) {
    return new Money(amount);
  }

  public plus(money: Money): Money {
    return new Money(this._amount + money._amount);
  }

  public minus(money: Money): Money {
    return new Money(this._amount - money._amount);
  }

  public times(percent: number): Money {
    return new Money(this._amount * percent);
  }

  public get Amount(): number {
    return this._amount;
  }
}

/*
*
* 10ì´ˆë‹¹ 5ì›ì”© ë¶€ê³¼ë˜ëŠ” ìš”ê¸ˆì œì— ê°€ì…í•œ ì‚¬ìš©ìê°€ 1ë¶„ë™ì•ˆ ë‘ë²ˆ í†µí™”ë¥¼ í•œ ê²½ìš° ìš”ê¸ˆ ê³„ì‚°
*/
const phone = new Phone(Money.wons(5), 10);

phone.call(
  new Call(new Date(2018, 0, 1, 12, 10, 0), new Date(2018, 0, 1, 12, 11, 0))
);

phone.call(
  new Call(new Date(2018, 1, 2, 12, 10, 0), new Date(2018, 1, 2, 12, 11, 0))
);

console.log(phone.calculateFee()); // Money { _amount: 60 }

/*
* ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œë¥¼ ìœ„í•œ NightlyDiscountPhone í´ë˜ìŠ¤
*/
class NightlyDiscountPhone {
  private static LATE_NIGHT_HOUR: number = 22;

  private nightlyAmount: Money;
  private regularAmount: Money;
  private seconds: number;
  private calls: Call[] = [];

  constructor(nightlyAmount: Money, regularAmount: Money, seconds: number) {
    this.nightlyAmount = nightlyAmount;
    this.regularAmount = regularAmount;
    this.seconds = seconds;
  }

  public calculateFee() {
    let result = Money.ZERO;

    for (const call of this.calls) {
      if (call.From.getHours() >= NightlyDiscountPhone.LATE_NIGHT_HOUR) {
        result = result.plus(
          this.nightlyAmount.times(call.Duration / this.seconds)
        );
      } else {
        result = result.plus(
          this.regularAmount.times(call.Duration / this.seconds)
        );
      }
    }

    return result;
  }
}

```

> ìš”êµ¬ì‚¬í•­ì€ í•­ìƒ ë³€í•œë‹¤.
> ì—¬ê¸°ì„œ ë§Œì•½ì— 'ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œ' ë¼ëŠ” ìƒˆë¡œìš´ ìš”ê¸ˆ ë°©ì‹ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤ëŠ” ìš”êµ¬ì‚¬í•­ì´ ë°œìƒ
> ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œëŠ” ë°¤ 10ì‹œ ì´í›„ì˜ í†µí™”ì— ëŒ€í•´ ìš”ê¸ˆì„ í• ì¸ í•´ì£¼ëŠ” ë°©ì‹ì´ë‹¤.

- ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œ`(NightlyDiscountPhone)` 
	- ë°¤ 10ì‹œ ì´ì „ì— ì ìš©í•  í†µí™”ìš”ê¸ˆ `(regularAmount)` 
	- ë°¤ 10ì‹œ ì´í›„ì— ì ìš©í•  í†µí™”ìš”ê¸ˆ `(nightlyAmount)` 
	- ë‹¨ìœ„ ì‹œê°„ `(seconds)` 
	- ex) 10ì‹œ ì´ì „ì— 10ì´ˆë‹¹ 5ì›ì´ê³ , 10ì‹œ ì´í›„ì— 10ì´ˆë‹¹ 2ì›ì´ë©´ secondsëŠ” 10ì´ˆ, regularAmountëŠ” 5ì›, nightlyAmountëŠ” 2ì›

> `Phone` ê³¼ `NightlyDiscountPhone` ì‚¬ì´ì—ëŠ” ì¤‘ë³µ ì½”ë“œê°€ ì¡´ì¬
### ì¤‘ë³µ ì½”ë“œ ìˆ˜ì •í•˜ê¸°
> í†µí™” ìš”ê¸ˆì— ë¶€ê³¼ í•  ì„¸ê¸ˆì„ ê³„ì‚° í•˜ëŠ” ê¸°ëŠ¥ ì¶”ê°€
> í†µí™” ìš”ê¸ˆ ê³„ì‚° ë¡œì§ì„ `Phone` ê³¼ `NightlyDiscountPhone` ì–‘ìª½ ëª¨ë‘ ìˆ˜ì •í•´ì•¼ í•œë‹¤.

```ts title="taxRate ì¶”ê°€"
// Phone í´ë˜ìŠ¤
class Phone {
	private taxRate: number;

	constructor(amount: Money, seconds: number, taxRate: number) {
	    // ....
	    this.taxRate = taxRate;
	}

	public calculateFee(): Money {
		let result = Money.ZERO;

	    for (const call of this.calls) {
	      result = result.plus(this.amount.times(call.Duration / this.seconds));
	    }
	    
		// taxRate ì¶”ê°€ ê³„ì‚° ë¡œì§
	    return resul.plus(result.times(this.taxRate));
		
	}
}

// NightlyDiscountPhone
class NightlyDiscountPhone {
  // ...

  constructor(nightlyAmount: Money, regularAmount: Money, seconds: number, taxRate: number) {
    // ...
    this.taxRate = taxRate;
  }

  public calculateFee() {
    let result = Money.ZERO;

    for (const call of this.calls) {
      if (call.From.getHours() >= NightlyDiscountPhone.LATE_NIGHT_HOUR) {
        result = result.plus(
          this.nightlyAmount.times(call.Duration / this.seconds)
        );
      } else {
        result = result.plus(
          this.regularAmount.times(call.Duration / this.seconds)
        );
      }
    }

	// taxRate ì¶”ê°€ ê³„ì‚° ë¡œì§
    return result.minus(result.times(this.taxRate));
  }
}
```
### íƒ€ì… ì½”ë“œ ì‚¬ìš©í•˜ê¸°
- ì¤‘ë³µ ì½”ë“œë¥¼ ì œê±°í•˜ê¸° ìœ„í•´ í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ë¡œ í•©ì¹˜ëŠ” ë°©ë²•ì´ ìˆì§€ë§Œ ë‚®ì€ ì‘ì§‘ë„ì™€ ë†’ì€ ê²°í•©ë„ë¼ëŠ” ë¬¸ì œì— ì‹œë‹¬ë¦¬ê²Œ ëœë‹¤.
### ê²°ë¡ 
- ì½”ë“œë¥¼ `DRY` í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ë…¸ë ¥í•˜ë¼.

## ìƒì†ì„ ì´ìš©í•´ì„œ ì¤‘ë³µ ì½”ë“œ ì œê±°í•˜ê¸°
#ê°ì²´ì§€í–¥/ìƒì†

- ìƒì†ì˜ ê¸°ë³¸ ì•„ì´ë””ì–´ëŠ” ì´ë¯¸ ì¡´ì¬í•˜ëŠ” í´ë˜ìŠ¤ì™€ ìœ ì‚¬í•œ í´ë˜ìŠ¤ê°€ í•„ìš”í•˜ë‹¤ë©´ ì½”ë“œë¥¼ ë³µì‚¬í•˜ì§€ ë§ê³  ìƒì†ì„ ì´ìš©í•´ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.
- ìƒì†ì˜ ë‹¨ì ì€ ê²°í•©ë„ë¥¼ ë†’ì´ê³  ìƒì†ì´ ì´ˆë˜í•˜ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ìì‹ í´ë˜ìŠ¤ ì‚¬ì´ì˜ ê°•í•œ ê²°í•©ì´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê¸° ì–´ë µê²Œ ë§Œë“ ë‹¤.


> 10ì‹œ ì´ì „ì˜ ìš”ê¸ˆì œëŠ” `Phone` ì— êµ¬í˜„ëœ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê³  10ì‹œ ì´í›„ì˜ í†µí™” ìš”ê¸ˆì„ ê³„ì‚°í•˜ëŠ” ë¡œì§ë§Œ `NightlyDiscountPhone` ì—ì„œ êµ¬í˜„

- ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œì˜ ê·œì¹™
	- ë°¤ 10ì‹œ ì´ì „ : 10ì´ˆë‹¹ 5ì›(regularAmount = 5ì›, seconds = 10ì´ˆ)
	- ë°¤ 10ì‹œ ì´í›„ : 10ì´ˆë‹¹ 2ì›(nightlyAmount = 2ì›, seconds = 10ì´ˆ)
		- Ex) ë°¤ 10ì‹œ ì´ì „ì— 2ë²ˆ í†µí™” 40ì´ˆ, 50ì´ˆë¼ë©´
			- (40ì´ˆ / 10ì´ˆ x 5ì›) + (50ì´ˆ / 10ì´ˆ x 5ì›) = 45ì›
		- Ex) ë°¤ 10ì‹œ ì´í›„
			- (40ì´ˆ / 10ì´ˆ x 2ì›) + (50ì´ˆ / 10ì´ˆ x 2ì›) = 18ì›
		- Ex) 40ì´ˆëŠ” ë°¤ 10ì‹œ ì´ì „ 50ì´ˆëŠ” ë°¤ 10ì‹œ ì´í›„
			- (40ì´ˆ / 10ì´ˆ x 5ì›) + (50ì´ˆ / 10ì´ˆ x 2ì›) = 30ì›

```ts
class NightlyDiscountPhone extends Phone {
  private static LATE_NIGHT_HOUR: number = 22;
  private nightlyAmount: Money;

  constructor(nightlyAmount: Money, regularAmount: Money, seconds: number) {
    super(regularAmount, seconds);
    this.nightlyAmount = nightlyAmount;
  }

  override calculateFee(): Money {
    // ë¶€ëª¨ í´ë˜ìŠ¤ì˜ calculateFee í˜¸ì¶œ
    let result = super.calculateFee();

    let nightlyFee = Money.ZERO;

    for (const call of super.Calls) {
      if (call.From.getHours() >= NightlyDiscountPhone.LATE_NIGHT_HOUR) {
        nightlyFee = nightlyFee.plus(
          super.Amount.minus(this.nightlyAmount).times(
            call.Duration / super.Seconds
          )
        );
      }
    }

    return result.minus(nightlyFee);
  }
}

const nightlyDiscountPhone = new NightlyDiscountPhone(
  Money.wons(2),
  Money.wons(5),
  10
);

/**
 * 10ì‹œ ì´ì „ í†µí™” ê³„ì‚°
 */
// nightlyDiscountPhone.call(
//   new Call(new Date(2018, 0, 1, 13, 0, 0), new Date(2018, 0, 1, 13, 0, 40))
// ); // 40ì´ˆ í†µí™”

// nightlyDiscountPhone.call(
//   new Call(new Date(2018, 0, 1, 13, 0, 0), new Date(2018, 0, 1, 13, 0, 50))
// ); // 50ì´ˆ í†µí™”

// console.log(nightlyDiscountPhone.calculateFee()); // Money { _amount: 45 }

/**
 * 10ì‹œ ì´í›„ í†µí™” ê³„ì‚°
 */
nightlyDiscountPhone.call(
  new Call(new Date(2018, 0, 1, 22, 0, 0), new Date(2018, 0, 1, 22, 0, 40))
); // 10ì‹œ ì´í›„ 40ì´ˆ í†µí™”

nightlyDiscountPhone.call(
  new Call(new Date(2018, 0, 1, 22, 0, 0), new Date(2018, 0, 1, 22, 0, 50))
); // 10ì‹œ ì´í›„ 50ì´ˆ í†µí™”

console.log(nightlyDiscountPhone.calculateFee()); // Money { _amount: 18 }
```

> ìƒì†ì„ ì—¼ë‘ì— ë‘ê³  ì„¤ê³„ë˜ì§€ ì•Šì€ í´ë˜ìŠ¤ë¥¼ ìƒì†ì„ ì´ìš©í•´ ì¬ì‚¬ìš©í•˜ëŠ”ê²ƒì€ ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ì–´ë µê²Œ ë§Œë“¤ë¿ë§Œ ì•„ë‹ˆë¼ ì§ê´€ì—ë„ ì–´ê¸‹ë‚  ìˆ˜ ìˆë‹¤.

## ê°•í•˜ê²Œ ê²°í•©ëœ Phoneê³¼ NightlyDiscountPhone
> ì„¸ê¸ˆ ë¶€ê³¼ ë¡œì§ì„ ì¶”ê°€ í•˜ê¸° ìœ„í•´ `Phone` ì„ ìˆ˜ì •í• ë•Œ `NightlyDiscountPhone` ë„ í•¨ê»˜ ìˆ˜ì • í•´ì£¼ì–´ì•¼ í•œë‹¤.
> ê·¸ ì´ìœ ëŠ” superì°¸ì¡°ë¥¼ í†µí•´ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œì—ì„œ ê³„ì‚°ì„í•˜ê³  10ì‹œ ì´í›„ì—ëŠ” NightlyDiscountPhoneì—ì„œ ê³„ì‚° í•˜ê¸° ë•Œë¬¸ì— ì„¸ê¸ˆ ë¶€ê³¼ ë¡œì§ì´ ì¶”ê°€ë˜ë©´ ë‘ í´ë˜ìŠ¤ì— ë‹¤ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤.
# ğŸ™ ì·¨ì•½í•œ ê¸°ë°˜ í´ë˜ìŠ¤ ë¬¸ì œ
- ìƒì† ê´€ê³„ë¥¼ ì¶”ê°€í• ìˆ˜ë¡ ì „ì²´ ì‹œìŠ¤í…œì˜ ê²°í•©ë„ê°€ ë†’ì•„ì§„ë‹¤.
- ìƒì†ì€ ë†’ì€ ê²°í•©ë„ë¡œ ì¸í•´ ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ì ì§ì ìœ¼ë¡œ ê°œì„ í•˜ëŠ”ê²ƒì€ ì–´ë µê²Œ ë§Œë“ ë‹¤.
- ìµœì•…ì˜ ê²½ìš°ì—ëŠ” ëª¨ë“  ìì‹ í´ë˜ìŠ¤ë¥¼ ë™ì‹œì— ìˆ˜ì •í•˜ê³  í…ŒìŠ¤íŠ¸í•´ì•¼ í•  ìˆ˜ ë„ ìˆë‹¤.
- ìº¡ìŠí™”ë¥¼ ì•½í™”ì‹œí‚¤ê³  ê²°í•©ë„ë¥¼ ë†’ì¸ë‹¤.
- ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì— ì˜ì¡´í•˜ë„ë¡ ë§Œë“¤ê¸° ë•Œë¬¸ì— ìº¡ìŠí™”ë¥¼ ì•½í™”ì‹œí‚¨ë‹¤.

## ìƒì†ì„ ìœ„í•œ ê²½ê³  1: ê°•ë ¥í•œ ê²°í•©ë„
- ìì‹ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ì•ˆì—ì„œ super ì°¸ì¡°ë¥¼ ì´ìš©í•´ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì§ì ‘ í˜¸ì¶œ í•  ê²½ìš° ë‘ í´ë˜ìŠ¤ëŠ” ê°•í•˜ê²Œ ê²°í•©ëœë‹¤.
- ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë³€ê²½ì— ì˜í•´ ìì‹ í´ë˜ìŠ¤ê°€ ì˜í–¥ì„ ë°›ì„ ìˆ˜ ìˆê²Œ ëœë‹¤.
- `super` í˜¸ì¶œì„ ì œê±°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ ê²°í•©ë„ë¥¼ ì œê±°í•˜ë¼.

## ìƒì†ì„ ìœ„í•œ ê²½ê³  2: ë¶ˆí•„ìš”í•œ ì¸í„°í˜ì´ìŠ¤ ìƒì†
- ìƒì†ë°›ì€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œê°€ ìì‹ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬ì¡°ì— ëŒ€í•œ ê·œì¹™ì„ ê¹¨ë“œë¦´ ìˆ˜ ìˆë‹¤.

## ìƒì†ì„ ìœ„í•œ ê²½ê³  3: ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©ì˜ ì˜¤ì‘ìš© ë¬¸ì œ
- ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”© í•  ê²½ìš° ë¶€ëª¨ í´ë˜ìŠ¤ê°€ ìì‹ ì˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ìì‹ í´ë˜ìŠ¤ê°€ ê²°í•©ë  ìˆ˜ ìˆë‹¤.

## ìƒì†ì„ ìœ„í•œ ê²½ê³  4: ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ìì‹ í´ë˜ìŠ¤ì˜ ë™ì‹œ ìˆ˜ì • ë¬¸ì œ
- í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ë©´ ê²°í•©ë„ë¡œ ì¸í•´ ìì‹ í´ë˜ìŠ¤ì™€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬í˜„ì„ ì˜ì›íˆ ë³€ê²½í•˜ì§€ ì•Šê±°ë‚˜, ìì‹ í´ë˜ìŠ¤ì™€ ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ë™ì‹œì— ë³€ê²½í•˜ê±°ë‚˜ ë‘˜ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•  ìˆ˜ ë°–ì— ì—†ë‹¤.


> ì˜ˆì‹œ
> ìŒì•… ëª©ë¡ì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ë¥¼ êµ¬í˜„ í•œë‹¤ê³  ê°€ì •.
> - ìŒì•… ì •ë³´ë¥¼ ì €ì¥ í•  `Song` í´ë˜ìŠ¤
> - ìŒì•… ëª©ë¡ì„ ì €ì¥ í•  `Playlist` í´ë˜ìŠ¤
> > ì¶”ê°€ê¸°ëŠ¥
> > í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ì—ì„œ ë…¸ë˜ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ì¶”ê°€ëœ `PersonalPlaylist` ê°€ í•„ìš”í•˜ë‹¤ê³  ê°€ì •

```java
public class Song {
	private String singer;
	private String title;

	public Song(String singer, String title){
		this.singer = singer;
		this.title = title;
	}

	public String getSinger(){
		return singer;
	}

	public String getTitle(){
		return title;
	}
}

public class Playlist {
	private List<Song> tracks = new ArrayList<>();

	public void append(Song song){
		getTracks().add(song);
	}

	public List<Song> getTracks(){
		return tracks;
	}
}

public class PersonalPlaylist extends Playlist{
	public void remove(Song song){
		getTracks().remove(song);
	}
}
```


```ts title="ê¸°ë³¸ ì½”ë“œ ì˜ˆì œ"
class Song {
  private singer: string;
  private title: string;

  constructor(singer: string, title: string) {
    this.singer = singer;
    this.title = title;
  }

  public get Singer(): string {
    return this.singer;
  }

  public get Title(): string {
    return this.title;
  }
}

class PlayList {
  private tracks: Song[] = [];

  public append(song: Song): void {
    this.tracks.push(song);
  }

  public getTracks(): Song[] {
    return this.tracks;
  }
}

class PersonalPlayList extends PlayList {
  public remove(song: Song): void {
    const tracks = this.getTracks();
    const index = tracks.findIndex(
      (track) => track.Title === song.Title && track.Singer === song.Singer
    );
    tracks.splice(index, 1);
  }
}

/**
 * í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ í´ë˜ìŠ¤
 */
const playlist = new PlayList();

playlist.append(new Song("ì•„ì´ìœ ", "ì¢‹ì€ë‚ "));
playlist.append(new Song("ì•„ì´ìœ ", "ë¶„í™ì‹ "));

console.log(playlist.getTracks());
/**
 * ê²°ê³¼
 * [
 *  Song { singer: 'ì•„ì´ìœ ', title: 'ì¢‹ì€ë‚ ' },
 *  Song { singer: 'ì•„ì´ìœ ', title: 'ë¶„í™ì‹ ' }
 * ]
 */

/**
 * í”Œë ˆì´ ë¦¬ìŠ¤íŠ¸ì—ì„œ ë…¸ë˜ë¥¼ ì‚­ì œí•˜ëŠ” ê¸°ëŠ¥ì¸ remove ë©”ì„œë“œë¥¼ ì¶”ê°€í•œ í´ë˜ìŠ¤
 */
const personalPlayList = new PersonalPlayList();

personalPlayList.append(new Song("ì•„ì´ìœ ", "ì¢‹ì€ë‚ "));
personalPlayList.append(new Song("ì•„ì´ìœ ", "ë¶„í™ì‹ "));

personalPlayList.remove(new Song("ì•„ì´ìœ ", "ì¢‹ì€ë‚ "));

console.log(personalPlayList.getTracks());
/**
 * ê²°ê³¼
 * [ Song { singer: 'ì•„ì´ìœ ', title: 'ë¶„í™ì‹ ' } ]
 */
```

> ë¬¸ì œ ë°œìƒ
> `PlayList` ì—ì„œ ë…¸ë˜ì˜ ëª©ë¡ë¿ë§Œ ì•„ë‹ˆë¼ ê°€ìˆ˜ë³„ ë…¸ë˜ì˜ ì œëª©ë„ í•¨ê»˜ ê´€ë¦¬í•´ì•¼ í•œë‹¤ê³  ê°€ì •
> > ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ë ¤ë©´ `PlayList` í´ë˜ìŠ¤ì—ì„œ ì¶”ê°€ ê¸°ëŠ¥ì„ ìœ„í•´ singersë¥¼ ì¶”ê°€ í–ˆì„ë•Œ
> > `PersonalPlaylist` ì˜ `remove` ë©”ì„œë“œë„ í•¨ê»˜ ìˆ˜ì • í•´ì•¼í•œë‹¤.


# ğŸ¼ Phone ë‹¤ì‹œ ì‚´í´ë³´ê¸°
- ìƒì†ìœ¼ë¡œ ì¸í•œ í”¼í•´ë¥¼ ìµœì†Œí™” í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ì.

## ì¶”ìƒí™”ì— ì˜ì¡´í•˜ì
- ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬í˜„ì´ ì•„ë‹Œ ì¶”ìƒí™”ì— ì˜ì¡´í•˜ë„ë¡ ë§Œë“ ë‹¤. (ì •í™•í•˜ê²ŒëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ìì‹ í´ë˜ìŠ¤ ëª¨ë‘ ì¶”ìƒí™”ì— ì˜ì¡´í•˜ë„ë¡ ìˆ˜ì •)

- *ì½”ë“œ ì¤‘ë³µì„ ì œê±°í•˜ê¸° ìœ„í•´ ìƒì†ì„ ë„ì…í•  ë•Œ ë”°ë¥´ëŠ” ë‘ê°€ì§€ ì›ì¹™*
	1. ë‘ ë©”ì„œë“œê°€ ìœ ì‚¬í•˜ê²Œ ë³´ì¸ë‹¤ë©´ ì°¨ì´ì ì„ ë©”ì„œë“œë¡œ ì¶”ì¶œí•˜ë¼.
		- ë©”ì„œë“œ ì¶”ì¶œì„ í†µí•´ ë‘ ë©”ì„œë“œë¥¼ ë™ì¼í•œ í˜•íƒœë¡œ ë³´ì´ë„ë¡ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
		- "ë³€í•˜ëŠ” ê²ƒìœ¼ë¡œë¶€í„° ë³€í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ë¶„ë¦¬í•˜ë¼" ë˜ëŠ” "ë³€í•˜ëŠ” ë¶€ë¶„ì„ ì°¾ê³  ì´ë¥¼ ìº¡ìŠí™” í•˜ë¼"
	1. ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ì½”ë“œë¥¼ í•˜ìœ„ë¡œ ë‚´ë¦¬ì§€ ë§ê³  ìì‹ í´ë˜ìŠ¤ì˜ ì½”ë“œë¥¼ ìƒìœ„ë¡œ ì˜¬ë ¤ë¼.
		- ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬ì²´ì ì¸ ë©”ì„œë“œë¥¼ ìì‹ í´ë˜ìŠ¤ë¡œ ë‚´ë¦¬ëŠ” ê²ƒë³´ë‹¤ ìì‹ í´ë˜ìŠ¤ì˜ ì¶”ìƒì ì¸ ë©”ì„œë“œë¥¼ ë¶€ëª¨ í´ë˜ìŠ¤ë¡œ ì˜¬ë¦¬ëŠ” ê²ƒì´ ì¬ì‚¬ìš©ì„±ê³¼ ì‘ì§‘ë„ ì¸¡ë©´ì—ì„œ ë” ë›°ì–´ë‚œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.
		- ëª¨ë“  í´ë˜ìŠ¤ë“¤ì´ ì¶”ìƒí™”ì— ì˜ì¡´í•˜ë„ë¡ ë§Œë“œëŠ”ê²ƒì´ ëª©í‘œ.
			- ì¶”ìƒí™”ì— ì˜ì¡´í•˜ë„ë¡ ë§Œë“œëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ì´í´ë˜ìŠ¤ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì í•©í•  ê²ƒì´ë‹¤.
		- ê³µí†µ ì½”ë“œë¥¼ ì˜®ê¸¸ë•Œ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë³´ë‹¤ ë©”ì„œë“œë¥¼ ë¨¼ì € ì´ë™ì‹œí‚¤ë©´ ê·¸ ë©”ì„œë“œì— í•„ìš”í•œ ë©”ì„œë“œë‚˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ê°€ ë¬´ì—‡ì¸ì§€ë¥¼ ì»´íŒŒì¼ ì—ëŸ¬ë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ì•Œ ìˆ˜ ìˆê¸° ë–„ë¬¸ì— ë©”ì„œë“œë¥¼ ë¨¼ì € ì´ë™ì‹œí‚¤ëŠ”ê²Œ í¸í•˜ë‹¤.

## ì°¨ì´ë¥¼ ë©”ì„œë“œë¡œ ì¶”ì¶œí•˜ë¼
```ts title="ë³€ê²½ì „ ì½”ë“œ"
/**
 * ì „ì²´ í†µí™” ëª©ë¡ì— ëŒ€í•´ ì•Œê³  ìˆëŠ” ì •ë³´ ì •ë¬¸ê°€ì—ê²Œ ìš”ê¸ˆì„ ê³„ì‚° í•  ì±…ì„ì„ í• ë‹¹ í•´ì•¼ í•œë‹¤.
 * ê·¸ê²Œ ë°”ë¡œ Phoneí´ë˜ìŠ¤ì´ë‹¤.
 * amount : ë‹¨ìœ„ìš”ê¸ˆì„ ì €ì¥
 * seconds: ë‹¨ìœ„ ì‹œê°„ì„ ì €ì¥
 * calls: ì „ì²´ í†µí™” ëª©ë¡ì„ ì €ì¥
 */
class Phone {
  private amount: Money;
  private seconds: number;
  private calls: Call[] = [];

  constructor(amount: Money, seconds: number) {
    this.amount = amount;
    this.seconds = seconds;
  }

  public call(call: Call): void {
    this.calls.push(call);
  }

  public get Calls(): Call[] {
    return this.calls;
  }

  public get Amount(): Money {
    return this.amount;
  }

  public get Seconds(): number {
    return this.seconds;
  }

  public calculateFee() {
    let result = Money.ZERO;

    for (const call of this.calls) {
      result = result.plus(this.amount.times(call.Duration / this.seconds));
    }

    return result;
  }
}

/*
* ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œë¥¼ ìœ„í•œ NightlyDiscountPhone í´ë˜ìŠ¤
*/
class NightlyDiscountPhone {
  private static LATE_NIGHT_HOUR: number = 22;

  private nightlyAmount: Money;
  private regularAmount: Money;
  private seconds: number;
  private calls: Call[] = [];

  constructor(nightlyAmount: Money, regularAmount: Money, seconds: number) {
    this.nightlyAmount = nightlyAmount;
    this.regularAmount = regularAmount;
    this.seconds = seconds;
  }

  public calculateFee() {
    let result = Money.ZERO;

    for (const call of this.calls) {
      if (call.From.getHours() >= NightlyDiscountPhone.LATE_NIGHT_HOUR) {
        result = result.plus(
          this.nightlyAmount.times(call.Duration / this.seconds)
        );
      } else {
        result = result.plus(
          this.regularAmount.times(call.Duration / this.seconds)
        );
      }
    }

    return result;
  }
}
```

```ts title="ë³€ê²½ í›„ ì½”ë“œ Phone" hl:27-39
class Phone {
  private amount: Money;
  private seconds: number;
  private calls: Call[] = [];

  constructor(amount: Money, seconds: number) {
    this.amount = amount;
    this.seconds = seconds;
  }

  public call(call: Call): void {
    this.calls.push(call);
  }

  public get Calls(): Call[] {
    return this.calls;
  }

  public get Amount(): Money {
    return this.amount;
  }

  public get Seconds(): number {
    return this.seconds;
  }

  public calculateFee() {
    let result = Money.ZERO;

    for (const call of this.calls) {
      result = result.plus(this.calculateCallFee(call));
    }

    return result;
  }

  private calculateCallFee(call: Call): Money {
    return this.amount.times(call.Duration / this.seconds);
  }
}
```

```ts title="ë³€ê²½ í›„ ì½”ë“œ NightlyDiscountPhone" hl:15-31
class NightlyDiscountPhone {
  private static LATE_NIGHT_HOUR: number = 22;

  private nightlyAmount: Money;
  private regularAmount: Money;
  private seconds: number;
  private calls: Call[] = [];

  constructor(nightlyAmount: Money, regularAmount: Money, seconds: number) {
    this.nightlyAmount = nightlyAmount;
    this.regularAmount = regularAmount;
    this.seconds = seconds;
  }

  public calculateFee() {
    let result = Money.ZERO;

    for (const call of this.calls) {
      result = result.plus(this.calculateCallFee(call));
    }

    return result;
  }

  private calculateCallFee(call: Call): Money {
    if (call.From.getHours() >= NightlyDiscountPhone.LATE_NIGHT_HOUR) {
      return this.nightlyAmount.times(call.Duration / this.seconds);
    } else {
      return this.regularAmount.times(call.Duration / this.seconds);
    }
  }
}
```

> ë‘ í´ë˜ìŠ¤ì˜ `calculateFee` ë©”ì„œë“œëŠ” ì™„ì „íˆ ë™ì¼ í•´ì¡Œê³ , ì¶”ì¶œí•œ `calculateCallFee` ë©”ì„œë“œ ì•ˆì— ì„œë¡œ ë‹¤ë¥¸ ë¶€ë¶„ì„ ê²©ë¦¬ ì‹œì¼œ ë†“ì•˜ë‹¤.

## ì¤‘ë³µ ì½”ë“œë¥¼ ë¶€ëª¨ í´ë˜ìŠ¤ë¡œ ì˜¬ë ¤ë¼
- ëª¨ë“  í´ë˜ìŠ¤ë“¤ì´ ì¶”ìƒí™”ì— ì˜ì¡´í•˜ë„ë¡ ë§Œë“œëŠ”ê²ƒì´ ëª©í‘œ.
	- ì¶”ìƒí™”ì— ì˜ì¡´í•˜ë„ë¡ ë§Œë“œëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ì´í´ë˜ìŠ¤ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì í•©í•  ê²ƒì´ë‹¤.

```ts
public abstract class AbstractPhone{}

public class Phone extends AbstractPhone {}

public class NightlyDiscountPhone extends AbstractPhone {}
```

```ts title="ì¶”ìƒ í´ë˜ìŠ¤"
abstract class AbstractPhone {
  private calls: Call[] = [];

  public calculateFee() {
    let result = Money.ZERO;

    for (const call of this.calls) {
      result = result.plus(this.calculateCallFee(call));
    }

    return result;
  }

  protected abstract calculateCallFee(call: Call): Money;
}

/**
 * ì „ì²´ í†µí™” ëª©ë¡ì— ëŒ€í•´ ì•Œê³  ìˆëŠ” ì •ë³´ ì •ë¬¸ê°€ì—ê²Œ ìš”ê¸ˆì„ ê³„ì‚° í•  ì±…ì„ì„ í• ë‹¹ í•´ì•¼ í•œë‹¤.
 * ê·¸ê²Œ ë°”ë¡œ Phoneí´ë˜ìŠ¤ì´ë‹¤.
 * amount : ë‹¨ìœ„ìš”ê¸ˆì„ ì €ì¥
 * seconds: ë‹¨ìœ„ ì‹œê°„ì„ ì €ì¥
 * calls: ì „ì²´ í†µí™” ëª©ë¡ì„ ì €ì¥
 */
class Phone extends AbstractPhone {
  private amount: Money;
  private seconds: number;

  constructor(amount: Money, seconds: number) {
    super();
    this.amount = amount;
    this.seconds = seconds;
  }

  public get Amount(): Money {
    return this.amount;
  }

  public get Seconds(): number {
    return this.seconds;
  }

  protected override calculateCallFee(call: Call): Money {
    return this.amount.times(call.Duration / this.seconds);
  }
}

/*
 * ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œë¥¼ ìœ„í•œ NightlyDiscountPhone í´ë˜ìŠ¤
 */
class NightlyDiscountPhone extends AbstractPhone {
  private static LATE_NIGHT_HOUR: number = 22;

  private nightlyAmount: Money;
  private regularAmount: Money;
  private seconds: number;

  constructor(nightlyAmount: Money, regularAmount: Money, seconds: number) {
    super();
    this.nightlyAmount = nightlyAmount;
    this.regularAmount = regularAmount;
    this.seconds = seconds;
  }

  protected override calculateCallFee(call: Call): Money {
    if (call.From.getHours() >= NightlyDiscountPhone.LATE_NIGHT_HOUR) {
      return this.nightlyAmount.times(call.Duration / this.seconds);
    }
    return this.regularAmount.times(call.Duration / this.seconds);
  }
}
```

## ì¶”ìƒí™”ê°€ í•µì‹¬ì´ë‹¤
#ê°ì²´ì§€í–¥/SRP-ë‹¨ì¼ì±…ì„ì›ì¹™ , #ê°ì²´ì§€í–¥/DIP-ì˜ì¡´ì„±ì—­ì „ì›ì¹™ , #ê°ì²´ì§€í–¥/OCP-ê°œë°©-íì‡„ì›ì¹™ 
> `AbstractPhone` ì€ ì „ì²´ í†µí™” ëª©ë¡ì„ ê³„ì‚°í•˜ëŠ” ë°©ë²•ì´ ë°”ë€” ê²½ìš°ì—ë§Œ ë³€ê²½ëœë‹¤.
> `Phone` ì€ ì¼ë°˜ ìš”ê¸ˆì œì˜ í†µí™” í•œê±´ì„ ê³„ì‚°í•˜ëŠ” ë°©ì‹ì´ ë°”ë€”ê²½ìš°ì—ë§Œ ë³€ê²½ëœë‹¤.
> `NightlyDiscountPhone` ì€ ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œì˜ í†µí™” í•œê±´ì„ ê³„ì‚°í•˜ëŠ” ë°©ì‹ì´ ë°”ë€”ê²½ìš°ì—ë§Œ ë³€ê²½ëœë‹¤.
> ì„¸ í´ë˜ìŠ¤ëŠ” ê°ê° í•˜ë‚˜ì˜ ë³€ê²½ ì´ìœ ë§Œì„ ê°€ì§„ë‹¤. ì¦‰, *ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP: single-responsibility-principle)*  ì„ ì¤€ìˆ˜í•˜ê¸° ë•Œë¬¸ì— ì‘ì§‘ë„ê°€ ë†’ë‹¤.

- *DIP-ì˜ì¡´ì„±ì—­ì „ì›ì¹™* ë„ ë§Œì¡±í•œë‹¤.
	- ìš”ê¸ˆ ê³„ì‚°ê³¼ ê´€ë ¨ëœ ìƒìœ„ ìˆ˜ì¤€ì˜ ì •ì±…ì„ êµ¬í˜„í•˜ëŠ” AbstractPhoneì´ ì„¸ë¶€ì ì¸ ìš”ê¸ˆ ê³„ì‚° ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” Phoneê³¼ NightlyDiscountPhoneì— ì˜ì¡´í•˜ì§€ ì•Šê³  ê·¸ ë°˜ëŒ€ë¡œ Phoneê³¼ NightlyDiscountPhoneì´ ì¶”ìƒí™”ì¸ AbstractPhoneì— ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

- *OCP-ê°œë°© íì‡„ì›ì¹™* ë„ ë§Œì¡±í•œë‹¤.
	- ìƒˆë¡œìš´ ìš”ê¸ˆì œê°€ í•„ìš”í•˜ë‹¤ë©´ AbstractPhoneì„ ìƒì†ë°›ëŠ” ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•œ í›„ calculateCallFee ë©”ì„œë“œë§Œ ì˜¤ë²„ë¼ì´ë”©í•˜ë©´ ëœë‹¤.

### ê²°ë¡ 
- ìƒì† ê³„ì¸µì´ ì½”ë“œë¥¼ ì§„í™”ì‹œí‚¤ëŠ”ë° ê±¸ë¦¼ëŒì´ ëœë‹¤ë©´ ì¶”ìƒí™”ë¥¼ ì°¾ì•„ë‚´ê³  ìƒì† ê³„ì¸µ ì•ˆì˜ í´ë˜ìŠ¤ë“¤ì´ ê·¸ ì¶”ìƒí™”ì— ì˜ì¡´í•˜ë„ë¡ ì½”ë“œë¥¼ ë¦¬íŒ©í„°ë§ í•˜ë¼.
- ì°¨ì´ì ì„ ë©”ì„œë“œë¡œ ì¶”ì¶œí•˜ê³ , ê³µí†µì ì¸ ë¶€ë¶„ì€ ë¶€ëª¨ í´ë˜ìŠ¤ë¡œ ì´ë™í•˜ë¼

## ì˜ë„ë¥¼ ë“œëŸ¬ë‚´ëŠ” ì´ë¦„ ì„ íƒí•˜ê¸°
- ì¶”ìƒ í´ë˜ìŠ¤ -> `Phone`
- ì¼ë°˜ ìš”ê¸ˆì œ í´ë˜ìŠ¤ -> `RegularPhone` 

## ì„¸ê¸ˆ ì¶”ê°€í•˜ê¸°
```ts title="ì„¸ê¸ˆ ì¶”ê°€í•˜ê¸°"
abstract class Phone {
  private taxRate: number;
  private calls: Call[] = [];

  constructor(taxRate: number) {
    this.taxRate = taxRate;
  }

  public calculateFee() {
    let result = Money.ZERO;

    for (const call of this.calls) {
      result = result.plus(this.calculateCallFee(call));
    }

    return result.plus(result.times(this.taxRate));
  }

  protected abstract calculateCallFee(call: Call): Money;
}

// Phoneì— ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì¸ taxRateë¥¼ ì¶”ê°€í•´ì„œ ìì‹ í´ë˜ìŠ¤ë“¤ì˜ ìƒì„±ì ì—­ì‹œ taxRateë¥¼ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•´ ìˆ˜ì • í•´ì•¼ì¤˜ì•¼ í•¨.
class RegularPhone extends Phone {
  private amount: Money;
  private seconds: number;

  constructor(amount: Money, seconds: number, taxRate: number) {
    super(taxRate);
    this.amount = amount;
    this.seconds = seconds;
  }

  public get Amount(): Money {
    return this.amount;
  }

  public get Seconds(): number {
    return this.seconds;
  }

  protected override calculateCallFee(call: Call): Money {
    return this.amount.times(call.Duration / this.seconds);
  }
}

class NightlyDiscountPhone extends Phone {
  private static LATE_NIGHT_HOUR: number = 22;

  private nightlyAmount: Money;
  private regularAmount: Money;
  private seconds: number;

  constructor(
    nightlyAmount: Money,
    regularAmount: Money,
    seconds: number,
    taxRate: number
  ) {
    super(taxRate);
    this.nightlyAmount = nightlyAmount;
    this.regularAmount = regularAmount;
    this.seconds = seconds;
  }

  protected override calculateCallFee(call: Call): Money {
    if (call.From.getHours() >= NightlyDiscountPhone.LATE_NIGHT_HOUR) {
      return this.nightlyAmount.times(call.Duration / this.seconds);
    }
    return this.regularAmount.times(call.Duration / this.seconds);
  }
  
}
```

- ì±…ì„ì„ ì•„ë¬´ë¦¬ ì˜ ë¶„ë¦¬í•˜ë”ë¼ë„ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì˜ ì¶”ê°€ëŠ” ì¢…ì¢… ìƒì† ê³„ì¸µ ì „ë°˜ì— ê±¸ì¹œ ë³€ê²½ì„ ìœ ë°œí•œë‹¤.

# ğŸ¶ ì°¨ì´ì— ì˜í•œ í”„ë¡œê·¸ë˜ë°
- ì°¨ì´ì— ì˜í•œ í”„ë¡œê·¸ë˜ë°
	- ê¸°ì¡´ ì½”ë“œì™€ ë‹¤ë¥¸ ë¶€ë¶„ë§Œì„ ì¶”ê°€í•¨ìœ¼ë¡œì¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•˜ëŠ” ë°©ë²•
	- ëª©í‘œëŠ” ì¤‘ë³µ ì½”ë“œë¥¼ ì œê±°í•˜ê³  ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.
- ìƒì†ì€ ê°•ë ¥í•œ ë„êµ¬ì§€ë§Œ ìƒì†ì˜ ì˜¤ìš©ê³¼ ë‚¨ìš©ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì´í•´í•˜ê³  í™•ì¥í•˜ê¸° ì–´ë µê²Œ ë§Œë“ ë‹¤.


```ts title="ìµœì¢…ì½”ë“œ"
/**
 * ê°œë³„ í†µí™” ê¸°ê°„ì„ ì €ì¥í•˜ëŠ” Call í´ë˜ìŠ¤
 * í†µí™” ì‹œì‘ ì‹œê°„(from)ê³¼ ì¢…ë£Œ ì‹œê°„(to)ì„ ì €ì¥í•œë‹¤.
 */
class Call {
  private from: Date;
  private to: Date;
  constructor(from: Date, to: Date) {
    this.from = from;
    this.to = to;
  }

  public get Duration(): number {
    return (this.to.getTime() - this.from.getTime()) / 1000;
  }

  public get From(): Date {
    return this.from;
  }
}

abstract class Phone {
  private taxRate: number;
  private calls: Call[] = [];

  constructor(taxRate: number) {
    this.taxRate = taxRate;
  }

  public calculateFee() {
    let result = Money.ZERO;

    for (const call of this.calls) {
      result = result.plus(this.calculateCallFee(call));
    }

    return result.plus(result.times(this.taxRate));
  }

  protected abstract calculateCallFee(call: Call): Money;
}

/**
 * ì „ì²´ í†µí™” ëª©ë¡ì— ëŒ€í•´ ì•Œê³  ìˆëŠ” ì •ë³´ ì •ë¬¸ê°€ì—ê²Œ ìš”ê¸ˆì„ ê³„ì‚° í•  ì±…ì„ì„ í• ë‹¹ í•´ì•¼ í•œë‹¤.
 * ê·¸ê²Œ ë°”ë¡œ Phoneí´ë˜ìŠ¤ì´ë‹¤.
 * amount : ë‹¨ìœ„ìš”ê¸ˆì„ ì €ì¥
 * seconds: ë‹¨ìœ„ ì‹œê°„ì„ ì €ì¥
 * calls: ì „ì²´ í†µí™” ëª©ë¡ì„ ì €ì¥
 */
class RegularPhone extends Phone {
  private amount: Money;
  private seconds: number;

  constructor(amount: Money, seconds: number, taxRate: number) {
    super(taxRate);
    this.amount = amount;
    this.seconds = seconds;
  }

  public get Amount(): Money {
    return this.amount;
  }

  public get Seconds(): number {
    return this.seconds;
  }

  protected override calculateCallFee(call: Call): Money {
    return this.amount.times(call.Duration / this.seconds);
  }
}

class Money {
  static readonly ZERO = Money.wons(0);

  constructor(private _amount: number) {}

  static wons(amount: number) {
    return new Money(amount);
  }

  public plus(money: Money): Money {
    return new Money(this._amount + money._amount);
  }

  public minus(money: Money): Money {
    return new Money(this._amount - money._amount);
  }

  public times(percent: number): Money {
    return new Money(this._amount * percent);
  }

  public get Amount(): number {
    return this._amount;
  }
}

/*
 * ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œë¥¼ ìœ„í•œ NightlyDiscountPhone í´ë˜ìŠ¤
 */
class NightlyDiscountPhone extends Phone {
  private static LATE_NIGHT_HOUR: number = 22;

  private nightlyAmount: Money;
  private regularAmount: Money;
  private seconds: number;

  constructor(
    nightlyAmount: Money,
    regularAmount: Money,
    seconds: number,
    taxRate: number
  ) {
    super(taxRate);
    this.nightlyAmount = nightlyAmount;
    this.regularAmount = regularAmount;
    this.seconds = seconds;
  }

  protected override calculateCallFee(call: Call): Money {
    if (call.From.getHours() >= NightlyDiscountPhone.LATE_NIGHT_HOUR) {
      return this.nightlyAmount.times(call.Duration / this.seconds);
    }
    return this.regularAmount.times(call.Duration / this.seconds);
  }
}
```

