#Javascript/í´ë¡œì €

> https://developer.mozilla.org/ko/docs/Web/JavaScript/Closures

- [n] comment
> 23 ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ê³µë¶€í•˜ê³  ë‹¤ì‹œ ë˜ ë³µìŠµ í•´ì•¼í•¨ í´ë¡œì € ê·¸ëž˜ì•¼ ì´í•´ê°€ ìž˜ë¨


## ðŸ‰ 24-3 í´ë¡œì €ì™€ ë ‰ì‹œì»¬ í™˜ê²½
```javascript
const x = 1;

// â‘ 
function outer() {
  const x = 10;
  const inner = function () { console.log(x); }; // â‘¡
  return inner;
}

// outer í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì¤‘ì²© í•¨ìˆ˜ innerë¥¼ ë°˜í™˜í•œë‹¤.
// ê·¸ë¦¬ê³  outer í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì—ì„œ íŒë˜ì–´ ì œê±°ëœë‹¤.
const innerFunc = outer(); // â‘¢
innerFunc(); // â‘£ 10
```

> ì™¸ë¶€ í•¨ìˆ˜ë³´ë‹¤ ì¤‘ì²© í•¨ìˆ˜ê°€ ë” ì˜¤ëž˜ ìœ ì§€ë˜ëŠ” ê²½ìš° ì¤‘ì²© í•¨ìˆ˜ëŠ” ì´ë¯¸ ìƒëª… ì£¼ê¸°ê°€ ì¢…ë£Œí•œ ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìžˆë‹¤. ì´ëŸ¬í•œ ì¤‘ì²© í•¨ìˆ˜ë¥¼ *í´ë¡œì €(closure)* ë¼ê³  ë¶€ë¥¸ë‹¤.


## ðŸŠ 24-4 í´ë¡œì € í™œìš©
> í´ë¡œì €ëŠ” ìƒíƒœ(stable)ë¥¼ ì•ˆì „í•˜ê²Œ ë³€ê²½í•˜ê³  ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.
> ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ì€ë‹‰(information hiding)í•˜ê³  íŠ¹ì • í•¨ìˆ˜ì—ê²Œë§Œ ìƒíƒœ ë³€ê²½ì„ í—ˆìš©í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

```javascript
// ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ìˆ˜
let num = 0;

// ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ê²½ í•¨ìˆ˜
const increase = function () {
  // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ 1ë§Œí¼ ì¦ê°€ ì‹œí‚¨ë‹¤.
  return ++num;
};

console.log(increase()); // 1
console.log(increase()); // 2
console.log(increase()); // 3
```

1. ì¹´ìš´íŠ¸ ìƒíƒœ(num ë³€ìˆ˜ì˜ ê°’)ëŠ” increase í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê¸° ì „ê¹Œì§€ ë³€ê²½ë˜ì§€ ì•Šê³  ìœ ì§€ë˜ì–´ì•¼ í•œë‹¤.
2. ì´ë¥¼ ìœ„í•´ ì¹´ìš´íŠ¸ ìƒíƒœ(num ë³€ìˆ˜ì˜ ê°’)ëŠ” increase í•¨ìˆ˜ë§Œì´ ë³€ê²½í•  ìˆ˜ ìžˆì–´ì•¼ í•œë‹¤.

```javascript
// ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ê²½ í•¨ìˆ˜
const increase = (function () {
  // ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ìˆ˜
  let num = 0;

  // í´ë¡œì €
  return function () {
    // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ 1ë§Œí¼ ì¦ê°€ ì‹œí‚¨ë‹¤.
    return ++num;
  };
}());

console.log(increase()); // 1
console.log(increase()); // 2
console.log(increase()); // 3
```

> ì´ì²˜ëŸ¼ í´ë¡œì €ëŠ” ìƒíƒœ(stable)ê°€ ì˜ë„ì¹˜ ì•Šê²Œ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ ì•ˆì „í•˜ê²Œ ì€ë‹‰(information hiding)í•˜ê³  
> íŠ¹ì • í•¨ìˆ˜ì—ê²Œë§Œ ìƒíƒœ ë³€ê²½ì„ í—ˆìš©í•˜ì—¬ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ë³€ê²½í•˜ê³  ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.


- ì¹´ìš´íŠ¸ ê°ì†Œ í¬í•¨

```javascript
const counter = (function () {
  // ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ìˆ˜
  let num = 0;

  // í´ë¡œì €ì¸ ë©”ì„œë“œë¥¼ ê°–ëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
  // ê°ì²´ ë¦¬í„°ëŸ´ì€ ìŠ¤ì½”í”„ë¥¼ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤.
  // ë”°ë¼ì„œ ì•„ëž˜ ë©”ì„œë“œë“¤ì˜ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì´ë‹¤.
  return {
    // num: 0, // í”„ë¡œí¼í‹°ëŠ” publicí•˜ë¯€ë¡œ ì€ë‹‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
    increase() {
      return ++num;
    },
    decrease() {
      return num > 0 ? --num : 0;
    }
  };
}());

console.log(counter.increase()); // 1
console.log(counter.increase()); // 2

console.log(counter.decrease()); // 1
console.log(counter.decrease()); // 0
```

- ìƒì„±ìž í•¨ìˆ˜ë¡œ í´ë¡œì € ìž‘ì„±

```javascript
const Counter = (function () {
  // â‘  ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ìˆ˜
  let num = 0;

  function Counter() {
    // this.num = 0; // â‘¡ í”„ë¡œí¼í‹°ëŠ” publicí•˜ë¯€ë¡œ ì€ë‹‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
  }

  Counter.prototype.increase = function () {
    return ++num;
  };

  Counter.prototype.decrease = function () {
    return num > 0 ? --num : 0;
  };

  return Counter;
}());

const counter = new Counter();

console.log(counter.increase()); // 1
console.log(counter.increase()); // 2

console.log(counter.decrease()); // 1
console.log(counter.decrease()); // 0
```


- [n] comment
>  classë¡œ í´ë¡œì € ë§Œë“œëŠ” ë°©ë²•

```javascript
class Counter {
  constructor(){
      let num = 0;

      this.increase = function() {
        return ++num;
      }
      this.decrease = function() {
        return num > 0 ? --num : 0;
      }
  }
}

const counter = new Counter();

console.log(counter.increase()); // 1
console.log(counter.increase()); // 2

console.log(counter.decrease()); // 1
console.log(counter.decrease()); // 0
```


- í•¨ìˆ˜í˜• í”„ë¡œê·¸ëž˜ ë°ì—ì„œ í´ë¡œì €ë¥¼ í™œìš©í•˜ëŠ” ê°„ë‹¨í•œ ì˜ˆì œ

```javascript
// í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ê³  í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” ê³ ì°¨ í•¨ìˆ˜
// ì´ í•¨ìˆ˜ëŠ” ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ìžìœ  ë³€ìˆ˜ counterë¥¼ ê¸°ì–µí•˜ëŠ” í´ë¡œì €ë¥¼ ë°˜í™˜í•œë‹¤.
function makeCounter(aux) {
  // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ìžìœ  ë³€ìˆ˜
  let counter = 0;

  // í´ë¡œì €ë¥¼ ë°˜í™˜
  return function () {
    // ì¸ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ë³´ì¡° í•¨ìˆ˜ì— ìƒíƒœ ë³€ê²½ì„ ìœ„ìž„í•œë‹¤.
    counter = aux(counter);
    return counter;
  };
}

// ë³´ì¡° í•¨ìˆ˜
function increase(n) {
  return ++n;
}

// ë³´ì¡° í•¨ìˆ˜
function decrease(n) {
  return --n;
}

// í•¨ìˆ˜ë¡œ í•¨ìˆ˜ë¥¼ ìƒì„±í•œë‹¤.
// makeCounter í•¨ìˆ˜ëŠ” ë³´ì¡° í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì•„ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤
const increaser = makeCounter(increase); // â‘ 
console.log(increaser()); // 1
console.log(increaser()); // 2

// increaser í•¨ìˆ˜ì™€ëŠ” ë³„ê°œì˜ ë…ë¦½ëœ ë ‰ì‹œì»¬ í™˜ê²½ì„ ê°–ê¸° ë•Œë¬¸ì— ì¹´ìš´í„° ìƒíƒœê°€ ì—°ë™í•˜ì§€ ì•ŠëŠ”ë‹¤.
const decreaser = makeCounter(decrease); // â‘¡
console.log(decreaser()); // -1
console.log(decreaser()); // -2
```

> increaserë§Œ ì‹¤í–‰ ë  ë•Œ makeCounterê°€ ì‹¤í–‰ ë˜ë©´ì„œ counterê°’ì´ 0ìœ¼ë¡œ ì´ˆê¸°í™” ë˜ê³ 
> decreaserê°€ ì‹¤í–‰ ë  ë–„ makeCounterê°€ ë˜ ë‹¤ì‹œ ì‹¤í–‰ ë˜ë©´ì„œ counterê°’ì´ 0ìœ¼ë¡œ ì´ˆê¸°í™” ë¨.
> makeCounter í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•  ë•Œ ë°˜í™˜ëœ í•¨ìˆ˜ëŠ” ìžì‹ ë§Œì˜ ë…ë¦½ëœ ë ‰ì‹œì»¬ í™˜ê²½ì„ ê°–ëŠ”ë‹¤

- í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²° í•œ ì˜ˆì œ

```javascript
// í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” ê³ ì°¨ í•¨ìˆ˜
// ì´ í•¨ìˆ˜ëŠ” ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ìžìœ  ë³€ìˆ˜ counterë¥¼ ê¸°ì–µí•˜ëŠ” í´ë¡œì €ë¥¼ ë°˜í™˜í•œë‹¤.
const counter = (function () {
  // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ìžìœ  ë³€ìˆ˜
  let counter = 0;

  // í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ” í´ë¡œì €ë¥¼ ë°˜í™˜
  return function (aux) {
    // ì¸ìˆ˜ë¡œ ì „ë‹¬ ë°›ì€ ë³´ì¡° í•¨ìˆ˜ì— ìƒíƒœ ë³€ê²½ì„ ìœ„ìž„í•œë‹¤.
    counter = aux(counter);
    return counter;
  };
}());

// ë³´ì¡° í•¨ìˆ˜
function increase(n) {
  return ++n;
}

// ë³´ì¡° í•¨ìˆ˜
function decrease(n) {
  return --n;
}

// ë³´ì¡° í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ì—¬ í˜¸ì¶œ
console.log(counter(increase)); // 1
console.log(counter(increase)); // 2

// ìžìœ  ë³€ìˆ˜ë¥¼ ê³µìœ í•œë‹¤.
console.log(counter(decrease)); // 1
console.log(counter(decrease)); // 0
```

> makeCounter í•¨ìˆ˜ë¥¼ ë‘ ë²ˆ í˜¸ì¶œí•˜ì§€ ë§ì•„ì•¼ í•œë‹¤.

## ðŸ‹ 24-5 ìº¡ìŠí™”ì™€ ì •ë³´ ì€ë‹‰
```javascript
const Person = (function () {
  let _age = 0; // private

  // ìƒì„±ìž í•¨ìˆ˜
  function Person(name, age) {
    this.name = name; // public
    _age = age;
  }

  // í”„ë¡œí† íƒ€ìž… ë©”ì„œë“œ
  Person.prototype.sayHi = function () {
    console.log(`Hi! My name is ${this.name}. I am ${_age}.`);
  };

  // ìƒì„±ìž í•¨ìˆ˜ë¥¼ ë°˜í™˜
  return Person;
}());

const me = new Person('Lee', 20);
me.sayHi(); // Hi! My name is Lee. I am 20.
console.log(me.name); // Lee
console.log(me._age); // undefined

const you = new Person('Kim', 30);
you.sayHi(); // Hi! My name is Kim. I am 30.
console.log(you.name); // Kim
console.log(you._age); // undefined

// ì¶”ê°€
me.sayHi(); // Hi! My name is Kim. I am 30.
```

> Person ìƒì„±ìž í•¨ìˆ˜ê°€ ì—¬ëŸ¬ ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ _age ë³€ìˆ˜ì˜ ìƒíƒœê°€ ìœ ì§€ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤.

```javascript
const me = new Person('Lee', 20);
me.sayHi(); // Hi! My name is Lee. I am 20.

const you = new Person('Kim', 30);
you.sayHi(); // Hi! My name is Kim. I am 30.

// _age ë³€ìˆ˜ ê°’ì´ ë³€ê²½ëœë‹¤!
me.sayHi(); // Hi! My name is Lee. I am 30.
```

> Person.prototype.sayHi ë©”ì„œë“œê°€ ë‹¨ í•œ ë²ˆ ìƒì„±ë˜ëŠ” í´ë¡œì €ì´ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” í˜„ìƒì´ë‹¤.
> ì´ì²˜ëŸ¼ ìžë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì •ë³´ ì€ë‹‰ì„ ì™„ì „í•˜ê²Œ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.

- [n] comment
>  const you = new Person('Kim',30);
>  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“  í›„ì— me.sayHi()ë©”ì†Œë“œë¥¼ í˜¸ì¶œ í–ˆë”ë‹ˆ 30ì´ ë‚˜ì˜¨ë‹¤.
>  age ë³€ìˆ˜ì˜ ìƒíƒœê°€ ìœ ì§€ë˜ì§€ ì•ŠëŠ”ë‹¤.


- [n] comment
> ES2022ì— private ì ‘ê·¼ ì œì–´ìžê°€ ì •ì‹ìœ¼ë¡œ ë‚˜ì™”ë‹¤.

```javascript
class Person{
  #age;
  constructor(name, age){
    this.name = name;
    this.#age = age;
  }
  sayHi(){
	  console.log(`Hi! My name is ${this.name}. I am ${this.#age}`);
  }
}

const me = new Person('Lee',20);
me.sayHi(); // -> Hi! My name is Lee. I am 20
console.log(me.name); // -> Lee

const you = new Person('Kim', 30);
you.sayHi(); // -> Hi! My name is Kim. I am 30
console.log(you.name); // -> Kim

me.sayHi(); // -> Hi! My name is Lee. I am 20
```

